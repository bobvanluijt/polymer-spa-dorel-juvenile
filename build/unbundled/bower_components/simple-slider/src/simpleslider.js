!function(t,n){"use strict";"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(function(){return window.SimpleSlider=n()}):t.SimpleSlider=n()}(this,function(){"use strict";function t(t,n){return void 0===t||null===t||""===t?n:t}function n(t,n){for(var e,i=t.length,s="";--i>=0;)e=t[i],"string"==typeof e&&(s=e.replace(parseInt(e,10)+"",""));return"opacity"!==n&&""===s&&(s="px"),s}function e(t){if(t<=0){try{console.warn("A SimpleSlider main container elementshould have at least one child.")}catch(t){}return!0}return!1}function i(t,n,e,s,o,a,r,l,h,u,d){function c(a){window.requestAnimationFrame(function(d){0===o&&(o=d),i(t,n,e,s,o,d,r,l,h,u,a)})}var m;if(o>0){if(m=h(a-o,r,l-r,s),!(a-o<=s))return t[n]=l+e,void(u&&d&&(d.call(u),d=null));t[n]=m+e}c(d)}function s(t,n,e,i,s){for(var o=[],a=t.children.length;--a>=0;){if("TEMPLATE"===t.children[a].tagName)return;o[a]=t.children[a],o[a].style.position="absolute",o[a].style.top="0"+n,o[a].style.left="0"+n,o[a].style[s]=e+n,o[a].style.zIndex=0}return o[0].style[s]=i+n,o[0].style.zIndex=1,o}function o(t,n){return n.style.zIndex=3,t&&(t.style.zIndex=1),n}function a(t,n){return n.style.zIndex=4,t&&(t.style.zIndex=2),n}function r(t){return"false"!==t&&t}function l(t){document[m]?t.pauseAutoPlay():t.resumeAutoPlay()}Date.now||(Date.now=function(){return(new Date).getTime()});for(var h=["webkit","moz"],u=0;u<h.length&&!window.requestAnimationFrame;++u){var d=h[u];window.requestAnimationFrame=window[d+"RequestAnimationFrame"],window.cancelAnimationFrame=window[d+"CancelAnimationFrame"]||window[d+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var c=0;window.requestAnimationFrame=function(t){var n=Date.now(),e=Math.max(c+16,n);return setTimeout(function(){t(c=e)},e-n)},window.cancelAnimationFrame=clearTimeout}var m,f,p;"undefined"!=typeof document.hidden?(m="hidden",f="visibilitychange"):"undefined"!=typeof document.mozHidden?(m="mozHidden",f="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(m="msHidden",f="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(m="webkitHidden",f="webkitvisibilitychange");var y=function(e,i){this.containerElem=e,this.interval=null,i||(i={});var s=parseInt(this.containerElem.style.width||this.containerElem.offsetWidth,10);this.trProp=t(i.transitionProperty,"left"),this.trTime=t(i.transitionDuration,.5),this.delay=1e3*t(i.transitionDelay,3),this.unit=n([i.startValue,i.visibleValue,i.endValue],this.trProp),this.startVal=parseInt(t(i.startValue,-s+this.unit),10),this.visVal=parseInt(t(i.visibleValue,"0"+this.unit),10),this.endVal=parseInt(t(i.endValue,s+this.unit),10),this.autoPlay=t(r(i.autoPlay),!0),this.ease=t(i.ease,y.defaultEase),this.onChange=t(i.onChange,null),this.onChangeEnd=t(i.onChangeEnd,null),this.init()};return y.defaultEase=function(t,n,e,i){return(t/=i/2)<1?e/2*t*t*t+n:e/2*((t-=2)*t*t+2)+n},y.easeNone=function(t,n,e,i){return e*t/i+n},y.prototype.init=function(){this.reset(),this.configSlideshow()},y.prototype.reset=function(){e(this.containerElem.children.length)||(this.containerElem.style.position="relative",this.containerElem.style.overflow="hidden",this.containerElem.style.display="block",this.imgs=s(this.containerElem,this.unit,this.startVal,this.visVal,this.trProp),this.actualIndex=0,this.inserted=null,this.removed=null,this.remainingTime=this.delay)},y.prototype.configSlideshow=function(){return!!this.imgs&&void this.startInterval()},y.prototype.startInterval=function(){var t=this;this.isAutoPlayable()&&(this.interval&&window.clearTimeout(this.interval),function n(){t.intervalStartTime=Date.now(),t.interval=window.setTimeout(function(){t.intervalStartTime=Date.now(),t.remainingTime=t.delay,t.change(t.nextIndex()),n()},t.remainingTime)}(),function(){p||"undefined"==typeof document.addEventListener||(document.addEventListener(f,function(){l(t)},!1),p=!0)}())},y.prototype.isAutoPlayable=function(){return this.autoPlay&&this.imgs.length>1},y.prototype.pauseAutoPlay=function(){this.isAutoPlayable()&&(this.remainingTime=this.delay-(Date.now()-this.intervalStartTime),window.clearTimeout(this.interval),this.interval=null)},y.prototype.resumeAutoPlay=function(){this.startInterval()},y.prototype.startAnim=function(t,n,e,s){i(t.style,this.trProp,this.unit,1e3*this.trTime,0,0,n,e,this.ease,this,s)},y.prototype.endAnim=function(){(this.onChangeEnd||"[object Function]"==Object.prototype.toString.call(this.onChangeEnd))&&this.onChangeEnd(this.actualIndex,this.nextIndex())},y.prototype.remove=function(t){this.removed=o(this.removed,this.imgs[t]),this.startAnim(this.imgs[t],this.visVal,this.endVal)},y.prototype.insert=function(t){this.inserted=a(this.inserted,this.imgs[t]),this.startAnim(this.imgs[t],this.startVal,this.visVal,this.endAnim)},y.prototype.change=function(t){var n=this.actualIndex;this.remove(this.actualIndex),this.insert(t),this.actualIndex=t,(this.onChange||"[object Function]"==Object.prototype.toString.call(this.onChange))&&this.onChange(n,this.actualIndex)},y.prototype.next=function(){this.change(this.nextIndex()),this.startInterval()},y.prototype.prev=function(){this.change(this.prevIndex()),this.startInterval()},y.prototype.nextIndex=function(){var t=this.actualIndex+1;return t>=this.imgs.length&&(t=0),t},y.prototype.prevIndex=function(){var t=this.actualIndex-1;return t<0&&(t=this.imgs.length-1),t},y.prototype.dispose=function(){if(window.clearTimeout(this.interval),this.imgs){for(var t=this.imgs.length;--t>=0;)this.imgs.pop();this.imgs=null}this.containerElem=null,this.interval=null,this.trProp=null,this.trTime=null,this.delay=null,this.startVal=null,this.endVal=null,this.autoPlay=null,this.actualIndex=null,this.inserted=null,this.removed=null,this.remainingTime=null,this.onChange=null,this.onChangeEnd=null},y});