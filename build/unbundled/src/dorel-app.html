<html><head><link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../bower_components/app-layout/app-scroll-effects/effects/waterfall.html">
<link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../bower_components/app-layout/helpers/helpers.html">
<link rel="import" href="../bower_components/app-route/app-location.html">
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../bower_components/iron-media-query/iron-media-query.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">


<link rel="import" href="../assets/cdn/theme-dorel-shared-styles.html">
<link rel="import" href="../assets/cdn/theme-maxicosi-shared-styles.html">

<link rel="import" href="dorel-app-placeholder.html">

<link rel="import" href="organisms/dorel-page-builder.html">
<link rel="import" href="templates/dorel-template.html">
<link rel="import" href="atoms/dorel-gtm-data-layer.html">


<script src="/bower_components/polymer-global-variables/dist/polymer-global-variables.js"></script>

</head><body><dom-module id="dorel-app">
  <template>
    <style is="custom-style" include="theme-maxicosi-shared-styles iron-flex iron-flex-alignment">
      /* 
       * Application wide styling
       * - Will define standard styling for components
       */
      :host {

        display: block;
        position: relative;
        padding-top: 130px;
        padding-bottom: 64px;
        min-height: 100vh;
        --primary-color: var(--theme-brand-color);
        color: var(--theme-primary-text-color);
      }

      :root {
        /* global input colors */
        --paper-input-container-underline: {
          border-bottom: 2px solid var(--theme-brand-color);
        };

        --paper-input-container-focus-color: var(--theme-brand-color-royal-blue);

        --paper-input-container-label-focus: {
          color: var(--theme-brand-color-royal-blue);
        };

      }

      /*
       * this file styling:
       */

      app-header {
        @apply(--layout-fixed-top);
        z-index: 1;
        background-color: rgba(255, 255, 255, 0.95);
        --app-header-shadow: {
          box-shadow: inset 0px 5px 6px -3px rgba(0, 0, 0, 0.2);
          height: 10px;
          bottom: -10px;
        };
      }

      /* 
       * iron-flex reusable classes 
       */
      .horizontal {
        @apply(--layout-horizontal);
      }
      .flex-end-justified {
        @apply(--layout-horizontal);
        @apply(--layout-end-justified);
      }
      .flex {
        @apply(--layout-flex);
      }
      .vertical-center {
        @apply(--layout-horizontal);
        @apply(--layout-center);
      }

      /* 
       * custom classes 
       */
      .header-search,
      .header-language {
        padding: 0 0.2rem; /* add component padding */
      }
      .header-utility {
        padding: 0 var(--theme-component-space-inner) 0 0; /* add logo spacing for padding */
      }

      paper-icon-button {
        color: var(--app-primary-color);
      }

      .left-bar-item {
        width: 40px;
      }

      .menu-btn {
        display: none;
      }
      
      :host(:not([page=detail])) .back-btn {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      #tabContainer {
        position: relative;
        height: 66px;
      }

      dorel-tab {
        --dorel-tab-overlay: {
          color: red;
          
          /*border-bottom: 2px solid var(--theme-color-active);*/
        };
      }

      dorel-tabs {
        height: 100%;
      }

      dorel-tab {
        margin: 0 10px;
      }

      dorel-tab a {
        text-decoration: none;
        outline: none;
        padding: 9px 5px;
        color: var(--theme-primary-text-color);
        @apply(--theme-ui);
        /*display: inline-block;*/
        /*color: var(--app-primary-color);*/
      }

      .iron-selected a {
        font-weight: bold;
        color: yellow;
        color: var(--theme-brand-color);
      }

      .drawer-list {
        margin: 0 20px;
      }

      .drawer-list a {
        display: block;
        padding: 0 16px;
        line-height: 40px;
        text-decoration: none;
        color: var(--app-secondary-color);
      }

      .drawer-list a.iron-selected {
        color: black;
        font-weight: bold;
      }

      app-drawer {
        z-index: 3;
      }

      /* small screen */
      @media (max-width: 767px) {
        :host {
          padding-top: 64px;
        }

        .menu-btn {
          display: block;
        }

        :host([page=detail]) .menu-btn {
          display: none;
        }
      }
      
      #content {
        min-height: 350px;
      }

      iron-pages {
        margin: 0 auto;
      }

      /**
       * temporary duplicate footer styling 
       */
      footer {
        background-color: var(--theme-brand-color-royal-blue);
        padding: var(--theme-component-space-inner);
      }

      footer a,
      .footer-text {
        color: white;
        text-decoration: none;
        @apply(--theme-ie-bodycopy);
      }
      .footer-heading {
        margin-bottom: .5rem;
        @apply(--theme-bodycopy);
        color: var(--theme-brand-color);
        font-size: 1rem;
      }
      .footer-media-links {
        padding: var(--theme-component-space-inner);
      }
      .footer-media-link {
        text-align: center;
        min-width: 100px;
        padding: 3px 20px;
        font-size: 13px;
        white-space: nowrap;
      }
      .footer-media-links a span {
        line-height: 24px;
        margin-left: 8px;
      }
      .footer-back-to-top {
        padding: 1rem 0 0;
      }
      /* lists not enumerated */
      .not-enum {
        padding-left: 0;
      }
      .not-enum li {
        list-style-type: none;
      }
      .footer-disclaimer {
        margin-top: 1rem;
        margin-bottom: 1rem;
      }
      footer[layoutwide] .footer-info {
        @apply(--layout-horizontal);
      }
      footer[layoutwide] .footer-menu {
        @apply(--layout-flex);
      }
      footer[layoutwide] .footer-disclaimer {
        @apply(--layout-flex-3);
      }

      .spinner {
        width: 40px;
        height: 40px;
        position: relative;
        margin: 100px auto;
      }

      .double-bounce1, .double-bounce2 {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        background-color: #333;
        opacity: 0.6;
        position: absolute;
        top: 5vh;
        left: 0;
        
        -webkit-animation: sk-bounce 2.0s infinite ease-in-out;
        animation: sk-bounce 2.0s infinite ease-in-out;
      }

      .double-bounce2 {
        -webkit-animation-delay: -1.0s;
        animation-delay: -1.0s;
      }

      @-webkit-keyframes sk-bounce {
        0%, 100% { -webkit-transform: scale(0.0) }
        50% { -webkit-transform: scale(1.0) }
      }

      @keyframes sk-bounce {
        0%, 100% { 
          transform: scale(0.0);
          -webkit-transform: scale(0.0);
        } 50% { 
          transform: scale(1.0);
          -webkit-transform: scale(1.0);
        }
      }
    </style>

    
    <google-tag-manager cid="GTM-TW3TM86"></google-tag-manager>
  
    
    <app-location route="{{ route }}"></app-location>
    <app-route route="{{ route }}" pattern="/:page" data="{{ routeData }}" tail="{{ subroute }}"></app-route>

    <iron-media-query query="max-width: 767px" query-matches="{{ smallScreen }}"></iron-media-query>

    
    <dorel-wp-collect-menu wp-url="[[ wpUrl ]]" menu-location="main_menu"></dorel-wp-collect-menu>

    
    <dorel-wp-collect-pages wp-url="[[ wpUrl ]]"></dorel-wp-collect-pages>

    <dorel-app-placeholder></dorel-app-placeholder>

    <app-header role="navigation" id="header" effects="waterfall" fixed="[[ smallScreen ]]" condenses="[[ !smallScreen ]]" reveals="[[ !smallScreen ]]">

      <header class="layout horizontal">

        <div class="flex layout horizontal">
          <div>
            <a href="/" aria-label="Dorel SPA">
              <dorel-logo></dorel-logo>
            </a>
          </div>

          <div class="vertical-center">
            <div sticky$="[[ _shouldShowTabs ]]" hidden$="[[ !_shouldShowTabs ]]">
              <template is="dom-if" if="{{ globals.Dorel.collect.menuItems.length }}">

                <dorel-tabs selected="[[ page ]]" attr-for-selected="name">
                  <template is="dom-repeat" items="{{ globals.Dorel.collect.menuItems }}" as="menuItem" initial-count="4">

                    <dorel-tab name="[[ menuItem.title ]]">
                      <a href="[[ menuItem.url ]]">[[ menuItem.title ]]</a>
                    </dorel-tab>

                  </template>
                </dorel-tabs>
                
              </template>
            </div>
          </div>
        </div>

        <div class="header-utility layout horizontal">
          <div class="header-search vertical-center">
            <dorel-search-small></dorel-search-small>
          </div>

          <div class="header-language vertical-center">
            <dorel-select-language></dorel-select-language>
          </div>
        </div>

      </header>

    </app-header>

    
    

    
    <section id="content">
      <iron-pages role="main" selected="{{ currentMenuItem.object_id }}" attr-for-selected="page-id">

        <template is="dom-repeat" items="[[ globals.Dorel.collect.pages ]]" as="page">
          
          <dorel-template page-id="[[ page.id ]]" template-name="[[ page.template ]]" template-data="[[ page ]]"></dorel-template>

        </template>

      </iron-pages>
    </section>

    <dorel-footer></dorel-footer>

    <dorel-gtm-data-layer gtm-data="{{ globals.Dorel }}"></dorel-gtm-data-layer>

  </template>

  <script>window.performance&&performance.mark&&performance.mark("dorel-app - before register"),Polymer({is:"dorel-app",properties:{debug:{type:Boolean,value:!1},page:{type:String,observer:"_pageChanged"},menuData:{type:Array},currentPage:{type:Number},_shouldShowTabs:{computed:"_computeShouldShowTabs(page, smallScreen)"},_shouldRenderTabs:{computed:"_computeShouldRenderTabs(_shouldShowTabs, loadComplete)"},_shouldRenderDrawer:{computed:"_computeShouldRenderDrawer(smallScreen, loadComplete)"}},observers:["_routePageChanged(routeData.page)","_setCurrentMenuItem(page, globals.Dorel.collect.menuItems)","_setCurrentPage(page, globals.Dorel.collect.pages)"],listeners:{"dom-change":"_domChange"},created:function(){window.performance&&performance.mark&&performance.mark("dorel-app.created"),Polymer.globalsManager.set("Dorel",{collect:{},current:{},events:{}}),this.removeAttribute("unresolved")},ready:function(){this.debug?this.wpUrl="../../assets/data":this.wpUrl="//polymer-wp.dev/wp-json",Polymer.RenderStatus.afterNextRender(this,function(){this.listen(window,"online","_notifyNetworkStatus"),this.listen(window,"offline","_notifyNetworkStatus")})},_routePageChanged:function(e){this.page=e||"home",Polymer.AppLayout.scroll({top:0,behavior:"silent"}),this.drawerOpened=!1},_pageChanged:function(e,t){null!=e&&("home"==e?this._pageLoaded(Boolean(t)):this._pageLoaded(Boolean(t)))},_pageLoaded:function(e){this._ensureLazyLoaded(),e&&this.async(function(){this.$.header.resetLayout()},1)},_ensureLazyLoaded:function(){this.loadComplete||Polymer.RenderStatus.afterNextRender(this,function(){this.importHref(this.resolveUrl("dorel-app-resources.html"),function(){"serviceWorker"in navigator,this._notifyNetworkStatus(),this.loadComplete=!0})})},_notifyNetworkStatus:function(){var e=this.offline;this.offline=!navigator.onLine,(this.offline||!this.offline&&e===!0)&&(this._networkSnackbar||(this._networkSnackbar=document.createElement("dorel-snackbar"),Polymer.dom(this.root).appendChild(this._networkSnackbar)),Polymer.dom(this._networkSnackbar).innerHTML=this.offline?"You are offline":"You are online",this._networkSnackbar.open())},_toggleDrawer:function(){this.drawerOpened=!this.drawerOpened},_showPage404:function(){this.page="404"},_setCurrentMenuItem:function(e,t){var o=this.globals.Dorel.collect.menuItems;o.length&&(this.currentMenuItem=o.find(function(t){return e===t.url.substring(1)&&t.object_id}),Polymer.globalsManager.set("Dorel.current.menuItem",this.currentMenuItem))},_setCurrentPage:function(e,t){var t=this.globals.Dorel.collect.pages;t.length&&(this.currentPage=t.find(function(t){return e===t.slug?t:null}),Polymer.globalsManager.set("Dorel.current.page",this.currentPage))},_domChange:function(e){if(window.performance&&performance.mark&&!this.__loggedDomChange){var t=Polymer.dom(e).rootTarget;t.domHost.is.match(this.page)&&(this.__loggedDomChange=!0,performance.mark(t.domHost.is+".domChange"))}},_computeShouldShowTabs:function(e,t){return"undefined"!=typeof e&&!t},_computeShouldRenderTabs:function(e,t){return e&&t},_computeShouldRenderDrawer:function(e,t){return e&&t},_hasTemplate:function(e){return!!e},_isTemplate:function(e,t){return e===t}});</script>
</dom-module>
</body></html>