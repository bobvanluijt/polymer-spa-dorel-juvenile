<html><head><meta charset="UTF-8"><link rel="import" href="../dorel-app.html"></head><body><div hidden="" by-vulcanize=""><script>Polymer({is:"google-maps-api",behaviors:[Polymer.IronJsonpLibraryBehavior],properties:{mapsUrl:{type:String,value:"https://maps.googleapis.com/maps/api/js?callback=%%callback%%"},apiKey:{type:String,value:""},clientId:{type:String,value:""},version:{type:String,value:"3.exp"},language:{type:String,value:""},signedIn:{type:Boolean,value:!1},notifyEvent:{type:String,value:"api-load"},libraryUrl:{type:String,computed:"_computeUrl(mapsUrl, version, apiKey, clientId, language, signedIn)"}},_computeUrl:function(e,a,t,i,o,n){var r=e+"&v="+a;if(r+="&libraries=drawing,geometry,places,visualization",t&&!i&&(r+="&key="+t),i&&(r+="&client="+i),!t&&!i){console.warn("No Google Maps API Key or Client ID specified. See https://developers.google.com/maps/documentation/javascript/get-api-key for instructions to get started with a key or client id.")}return o&&(r+="&language="+o),n&&(r+="&signed_in="+n),r},get api(){return google.maps}});</script><script>Polymer({is:"iron-selector",behaviors:[Polymer.IronMultiSelectableBehavior]});</script><dom-module id="google-map-marker" assetpath="../../bower_components/google-map/">
  <style>
    :host {
      display: none;
    }
  </style>
  <template><content></content></template>
</dom-module>

<script>!function(){function e(){this.draggable?this.dragHandler_=google.maps.event.addListener(this.marker,"dragend",t.bind(this)):(google.maps.event.removeListener(this.dragHandler_),this.dragHandler_=null)}function t(e,t,i){this.latitude=e.latLng.lat(),this.longitude=e.latLng.lng()}Polymer({is:"google-map-marker",properties:{marker:{type:Object,notify:!0},map:{type:Object,observer:"_mapChanged"},info:{type:Object,value:null},clickEvents:{type:Boolean,value:!1,observer:"_clickEventsChanged"},dragEvents:{type:Boolean,value:!1,observer:"_dragEventsChanged"},icon:{type:Object,value:null,observer:"_iconChanged"},mouseEvents:{type:Boolean,value:!1,observer:"_mouseEventsChanged"},zIndex:{type:Number,value:0,observer:"_zIndexChanged"},longitude:{type:Number,value:null,notify:!0},latitude:{type:Number,value:null,notify:!0},animation:{type:String,value:null,observer:"_animationChanged"},open:{type:Boolean,value:!1,observer:"_openChanged"}},observers:["_updatePosition(latitude, longitude)"],detached:function(){this.marker&&(google.maps.event.clearInstanceListeners(this.marker),this._listeners={},this.marker.setMap(null)),this._contentObserver&&this._contentObserver.disconnect()},attached:function(){this.marker&&this.marker.setMap(this.map)},_updatePosition:function(){this.marker&&null!=this.latitude&&null!=this.longitude&&this.marker.setPosition(new google.maps.LatLng(parseFloat(this.latitude),parseFloat(this.longitude)))},_clickEventsChanged:function(){this.map&&(this.clickEvents?(this._forwardEvent("click"),this._forwardEvent("dblclick"),this._forwardEvent("rightclick")):(this._clearListener("click"),this._clearListener("dblclick"),this._clearListener("rightclick")))},_dragEventsChanged:function(){this.map&&(this.dragEvents?(this._forwardEvent("drag"),this._forwardEvent("dragend"),this._forwardEvent("dragstart")):(this._clearListener("drag"),this._clearListener("dragend"),this._clearListener("dragstart")))},_mouseEventsChanged:function(){this.map&&(this.mouseEvents?(this._forwardEvent("mousedown"),this._forwardEvent("mousemove"),this._forwardEvent("mouseout"),this._forwardEvent("mouseover"),this._forwardEvent("mouseup")):(this._clearListener("mousedown"),this._clearListener("mousemove"),this._clearListener("mouseout"),this._clearListener("mouseover"),this._clearListener("mouseup")))},_animationChanged:function(){this.marker&&this.marker.setAnimation(google.maps.Animation[this.animation])},_iconChanged:function(){this.marker&&this.marker.setIcon(this.icon)},_zIndexChanged:function(){this.marker&&this.marker.setZIndex(this.zIndex)},_mapChanged:function(){this.marker&&(this.marker.setMap(null),google.maps.event.clearInstanceListeners(this.marker)),this.map&&this.map instanceof google.maps.Map&&this._mapReady()},_contentChanged:function(){this._contentObserver&&this._contentObserver.disconnect(),this._contentObserver=new MutationObserver(this._contentChanged.bind(this)),this._contentObserver.observe(this,{childList:!0,subtree:!0});var e=this.innerHTML.trim();e?(this.info||(this.info=new google.maps.InfoWindow,this.openInfoHandler_=google.maps.event.addListener(this.marker,"click",function(){this.open=!0}.bind(this)),this.closeInfoHandler_=google.maps.event.addListener(this.info,"closeclick",function(){this.open=!1}.bind(this))),this.info.setContent(e)):this.info&&(google.maps.event.removeListener(this.openInfoHandler_),google.maps.event.removeListener(this.closeInfoHandler_),this.info=null)},_openChanged:function(){this.info&&(this.open?(this.info.open(this.map,this.marker),this.fire("google-map-marker-open")):(this.info.close(),this.fire("google-map-marker-close")))},_mapReady:function(){this._listeners={},this.marker=new google.maps.Marker({map:this.map,position:{lat:parseFloat(this.latitude),lng:parseFloat(this.longitude)},title:this.title,animation:google.maps.Animation[this.animation],draggable:this.draggable,visible:!this.hidden,icon:this.icon,zIndex:this.zIndex}),this._contentChanged(),this._clickEventsChanged(),this._dragEventsChanged(),this._mouseEventsChanged(),this._openChanged(),e.bind(this)()},_clearListener:function(e){this._listeners[e]&&(google.maps.event.removeListener(this._listeners[e]),this._listeners[e]=null)},_forwardEvent:function(e){this._listeners[e]=google.maps.event.addListener(this.marker,e,function(t){this.fire("google-map-marker-"+e,t)}.bind(this))},attributeChanged:function(t){if(this.marker)switch(t){case"hidden":this.marker.setVisible(!this.hidden);break;case"draggable":this.marker.setDraggable(this.draggable),e.bind(this)();break;case"title":this.marker.setTitle(this.title)}}})}();</script>
<dom-module id="google-map" assetpath="../../bower_components/google-map/">

  <style>
    :host {
      position: relative;
      display: block;
      height: 100%;
    }

    #map {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    }

  </style>
  <template>

    <google-maps-api id="api" api-key="[[apiKey]]" client-id="[[clientId]]" version="[[version]]" signed-in="[[signedIn]]" language="[[language]]" on-api-load="_mapApiLoaded" maps-url="[[mapsUrl]]"></google-maps-api>

    <div id="map"></div>

    <iron-selector id="selector" multi="[[!singleInfoWindow]]" selected-attribute="open" activate-event="google-map-marker-open" on-google-map-marker-close="_deselectMarker">
      <content id="markers" select="google-map-marker"></content>
    </iron-selector>
    <content id="objects" select="*"></content>
  </template>
</dom-module>

<script>Polymer({is:"google-map",properties:{apiKey:String,mapsUrl:{type:String},clientId:String,latitude:{type:Number,value:37.77493,notify:!0,reflectToAttribute:!0},map:{type:Object,notify:!0,value:null},longitude:{type:Number,value:-122.41942,notify:!0,reflectToAttribute:!0},kml:{type:String,value:null,observer:"_loadKml"},zoom:{type:Number,value:10,observer:"_zoomChanged",notify:!0},noAutoTilt:{type:Boolean,value:!1},mapType:{type:String,value:"roadmap",observer:"_mapTypeChanged",notify:!0},version:{type:String,value:"3.exp"},disableDefaultUi:{type:Boolean,value:!1,observer:"_disableDefaultUiChanged"},disableMapTypeControl:{type:Boolean,value:!1,observer:"_disableMapTypeControlChanged"},disableStreetViewControl:{type:Boolean,value:!1,observer:"_disableStreetViewControlChanged"},fitToMarkers:{type:Boolean,value:!1,observer:"_fitToMarkersChanged"},disableZoom:{type:Boolean,value:!1,observer:"_disableZoomChanged"},styles:{type:Object,value:function(){return{}}},maxZoom:{type:Number,observer:"_maxZoomChanged"},minZoom:{type:Number,observer:"_minZoomChanged"},signedIn:{type:Boolean,value:!1},language:{type:String},clickEvents:{type:Boolean,value:!1,observer:"_clickEventsChanged"},dragEvents:{type:Boolean,value:!1,observer:"_dragEventsChanged"},mouseEvents:{type:Boolean,value:!1,observer:"_mouseEventsChanged"},additionalMapOptions:{type:Object,value:function(){return{}}},markers:{type:Array,value:function(){return[]},readOnly:!0},objects:{type:Array,value:function(){return[]},readOnly:!0},singleInfoWindow:{type:Boolean,value:!1}},behaviors:[Polymer.IronResizableBehavior],listeners:{"iron-resize":"resize"},observers:["_debounceUpdateCenter(latitude, longitude)"],attached:function(){this._initGMap()},detached:function(){this._markersChildrenListener&&(this.unlisten(this.$.selector,"items-changed","_updateMarkers"),this._markersChildrenListener=null),this._objectsMutationObserver&&(this._objectsMutationObserver.disconnect(),this._objectsMutationObserver=null)},_initGMap:function(){this.map||!0===this.$.api.libraryLoaded&&this.isAttached&&(this.map=new google.maps.Map(this.$.map,this._getMapOptions()),this._listeners={},this._updateCenter(),this._loadKml(),this._updateMarkers(),this._updateObjects(),this._addMapListeners(),this.fire("google-map-ready"))},_mapApiLoaded:function(){this._initGMap()},_getMapOptions:function(){var e={zoom:this.zoom,tilt:this.noAutoTilt?0:45,mapTypeId:this.mapType,disableDefaultUI:this.disableDefaultUi,mapTypeControl:!this.disableDefaultUi&&!this.disableMapTypeControl,streetViewControl:!this.disableDefaultUi&&!this.disableStreetViewControl,disableDoubleClickZoom:this.disableZoom,scrollwheel:!this.disableZoom,styles:this.styles,maxZoom:Number(this.maxZoom),minZoom:Number(this.minZoom)};null!=this.getAttribute("draggable")&&(e.draggable=this.draggable);for(var t in this.additionalMapOptions)e[t]=this.additionalMapOptions[t];return e},_attachChildrenToMap:function(e){if(this.map)for(var t,i=0;t=e[i];++i)t.map=this.map},_observeMarkers:function(){this._markersChildrenListener||(this._markersChildrenListener=this.listen(this.$.selector,"items-changed","_updateMarkers"))},_updateMarkers:function(){var e=Array.prototype.slice.call(Polymer.dom(this.$.markers).getDistributedNodes());if(e.length===this.markers.length){if(0===e.filter(function(e){return this.markers&&-1===this.markers.indexOf(e)}.bind(this)).length)return void(this._markersChildrenListener||this._observeMarkers())}this._observeMarkers(),this.markers=this._setMarkers(e),this._attachChildrenToMap(this.markers),this.fitToMarkers&&this._fitToMarkersChanged()},_observeObjects:function(){this._objectsMutationObserver||(this._objectsMutationObserver=new MutationObserver(this._updateObjects.bind(this)),this._objectsMutationObserver.observe(this,{childList:!0}))},_updateObjects:function(){var e=Array.prototype.slice.call(Polymer.dom(this.$.objects).getDistributedNodes());if(e.length===this.objects.length){if(0===e.filter(function(e){return-1===this.objects.indexOf(e)}.bind(this)).length)return void this._observeObjects()}this._observeObjects(),this._setObjects(e),this._attachChildrenToMap(this.objects)},clear:function(){for(var e,t=0;e=this.markers[t];++t)e.marker.setMap(null)},resize:function(){if(this.map){var e=this.latitude,t=this.longitude;google.maps.event.trigger(this.map,"resize"),this.latitude=e,this.longitude=t,this.fitToMarkers&&this._fitToMarkersChanged()}},_loadKml:function(){if(this.map&&this.kml){new google.maps.KmlLayer({url:this.kml,map:this.map})}},_debounceUpdateCenter:function(){this.debounce("updateCenter",this._updateCenter)},_updateCenter:function(){if(this.cancelDebouncer("updateCenter"),this.map&&void 0!==this.latitude&&void 0!==this.longitude){var e=Number(this.latitude);if(isNaN(e))throw new TypeError("latitude must be a number");var t=Number(this.longitude);if(isNaN(t))throw new TypeError("longitude must be a number");var i=new google.maps.LatLng(e,t),s=this.map.getCenter();s?(s=new google.maps.LatLng(s.lat(),s.lng()),s.equals(i)||this.map.panTo(i)):this.map.setCenter(i)}},_zoomChanged:function(){this.map&&this.map.setZoom(Number(this.zoom))},_idleEvent:function(){this.map?this._forwardEvent("idle"):this._clearListener("idle")},_clickEventsChanged:function(){this.map&&(this.clickEvents?(this._forwardEvent("click"),this._forwardEvent("dblclick"),this._forwardEvent("rightclick")):(this._clearListener("click"),this._clearListener("dblclick"),this._clearListener("rightclick")))},_dragEventsChanged:function(){this.map&&(this.dragEvents?(this._forwardEvent("drag"),this._forwardEvent("dragend"),this._forwardEvent("dragstart")):(this._clearListener("drag"),this._clearListener("dragend"),this._clearListener("dragstart")))},_mouseEventsChanged:function(){this.map&&(this.mouseEvents?(this._forwardEvent("mousemove"),this._forwardEvent("mouseout"),this._forwardEvent("mouseover")):(this._clearListener("mousemove"),this._clearListener("mouseout"),this._clearListener("mouseover")))},_maxZoomChanged:function(){this.map&&this.map.setOptions({maxZoom:Number(this.maxZoom)})},_minZoomChanged:function(){this.map&&this.map.setOptions({minZoom:Number(this.minZoom)})},_mapTypeChanged:function(){this.map&&this.map.setMapTypeId(this.mapType)},_disableDefaultUiChanged:function(){this.map&&this.map.setOptions({disableDefaultUI:this.disableDefaultUi})},_disableMapTypeControlChanged:function(){this.map&&this.map.setOptions({mapTypeControl:!this.disableMapTypeControl})},_disableStreetViewControlChanged:function(){this.map&&this.map.setOptions({streetViewControl:!this.disableStreetViewControl})},_disableZoomChanged:function(){this.map&&this.map.setOptions({disableDoubleClickZoom:this.disableZoom,scrollwheel:!this.disableZoom})},attributeChanged:function(e){if(this.map)switch(e){case"draggable":this.map.setOptions({draggable:this.draggable})}},_fitToMarkersChanged:function(){if(this.map&&this.fitToMarkers&&this.markers.length>0){for(var e,t=new google.maps.LatLngBounds,i=0;e=this.markers[i];++i)t.extend(new google.maps.LatLng(e.latitude,e.longitude));this.markers.length>1&&this.map.fitBounds(t),this.map.setCenter(t.getCenter())}},_addMapListeners:function(){google.maps.event.addListener(this.map,"center_changed",function(){var e=this.map.getCenter();this.latitude=e.lat(),this.longitude=e.lng()}.bind(this)),google.maps.event.addListener(this.map,"zoom_changed",function(){this.zoom=this.map.getZoom()}.bind(this)),google.maps.event.addListener(this.map,"maptypeid_changed",function(){this.mapType=this.map.getMapTypeId()}.bind(this)),this._clickEventsChanged(),this._dragEventsChanged(),this._mouseEventsChanged(),this._idleEvent()},_clearListener:function(e){this._listeners[e]&&(google.maps.event.removeListener(this._listeners[e]),this._listeners[e]=null)},_forwardEvent:function(e){this._listeners[e]=google.maps.event.addListener(this.map,e,function(t){this.fire("google-map-"+e,t)}.bind(this))},_deselectMarker:function(e,t){var i=this.$.selector.indexOf(e.target);this.singleInfoWindow?this.$.selector.selected=null:this.$.selector.selectedValues&&(this.$.selector.selectedValues=this.$.selector.selectedValues.filter(function(e){return e!==i}))}});</script>
<script>Polymer({is:"iron-a11y-keys",behaviors:[Polymer.IronA11yKeysBehavior],properties:{target:{type:Object,observer:"_targetChanged"},keys:{type:String,reflectToAttribute:!0,observer:"_keysChanged"}},attached:function(){this.target||(this.target=this.parentNode)},_targetChanged:function(e){this.keyEventTarget=e},_keysChanged:function(){this.removeOwnKeyBindings(),this.addOwnKeyBinding(this.keys,"_fireKeysPressed")},_fireKeysPressed:function(e){this.fire("keys-pressed",e.detail,{})}});</script><dom-module id="dorel-section-store-locator-result" assetpath="../organisms/">
  <template>
    <style include="iron-flex iron-flex-alignment" is="custom-style">
      :root {
        --button-margin-spacing: 0;
      }

      .location-title {
        @apply(--theme-typography-5);
        width: 100%;
        text-align: left;
        margin-top: 0;
      }

      .location-content {
        @apply(--theme-paragraph-text);
        margin-top: 0;
      }

      dorel-cta {
        width: auto;
        float: left;
        margin-right: 1.5em;
      }
    </style>

    <div class$="dorel-section-store-locator-result [[ _isVip(store.is_vip) ]]">
      <template is="dom-if" if="[[ !store.address ]]">
        <p class="location-content">No Address Available</p>
      </template>
      <template is="dom-if" if="[[ store.address ]]">
        <h3 class="location-title">[[ store.name ]]</h3>
        <p class="location-content">
          <template is="dom-if" if="[[ store.city ]]">[[ store.city ]]<br></template>
          <template is="dom-if" if="[[ store.address ]]">[[ store.address ]]<br></template>
          <template is="dom-if" if="[[ store.postal_code ]]">[[ store.postal_code ]]<br></template>
        </p>
        <template is="dom-if" if="[[ store.address ]]">
          <dorel-cta title="Plan route" type="link" target="_blank" link="http://maps.google.com/maps?z=16&amp;daddr=[[ store.address ]],+[[ store.city ]],+[[ store.country ]],+[[ store.postal_code ]]" size="small" icon="dorel-icons:location" gtm-action="plan-route-retailer" gtm-parent="[[ gtmParent ]]" gtm-parent-index="[[ gtmParentIndex ]]" gtm-child="[[ gtmChild ]]" gtm-child-index="[[ gtmChildIndex ]]" gtm-cta-index="0">Plan route</dorel-cta>
        </template>
        <template is="dom-if" if="[[ store.phone_number ]]">
          <dorel-cta title="Call" type="link" link="tel:[[ store.phone_number ]]" size="small" icon="dorel-icons:call" gtm-action="call-retailer" gtm-parent="[[ gtmParent ]]" gtm-parent-index="[[ gtmParentIndex ]]" gtm-child="[[ gtmChild ]]" gtm-child-index="[[ gtmChildIndex ]]" gtm-cta-index="1">[[ store.phone_number ]]</dorel-cta>
        </template>
        <template is="dom-if" if="[[ store.online_shop.url ]]">

          <dorel-cta title="Visit website" type="link" target="_blank" link="[[ store.online_shop.url ]]" size="small" icon="dorel-icons:external-link" gtm-action="visit-website-retailer" gtm-parent="[[ gtmParent ]]" gtm-parent-index="[[ gtmParentIndex ]]" gtm-child="[[ gtmChild ]]" gtm-child-index="[[ gtmChildIndex ]]" gtm-cta-index="2">Visit website</dorel-cta>
        </template>
      </template>
    </div>
  </template>

  <script>Polymer({is:"dorel-section-store-locator-result",properties:{store:{type:Object,value:function(){return{}}}},_isVip:function(e){return void 0!==e&&e?"vip":""}});</script>
</dom-module>
<dom-module id="dorel-section-store-locator-results" assetpath="../organisms/">
  <template>
    <style include="iron-flex iron-flex-alignment" is="custom-style">

      :root {
        --button-margin-spacing: 0;
      }

      .results {
        padding: 1.5em var(--theme-gutter-mobile);
        float: left;
        width: 100%;
        box-sizing: border-box;
        background-color: var(--theme-color-white);
      }

      .row {
        @apply(--theme-grid-row);
        @apply(--layout-flex);
      }

      .title {
        @apply(--theme-typography-7);
        margin-top: 0;
        color: var(--theme-brand-color-1);
        width: 100%;
        text-align: left;
        box-sizing: border-box;
      }

      .location-title {
        @apply(--theme-typography-5);
        width: 100%;
        text-align: left;
        margin-top: 0;
      }

      .location-content {
        @apply(--theme-paragraph-text);
        margin-top: 0;
      }

      .results-content {
        @apply(--theme-grid-column-mobile);
        max-width: var(--theme-base-paragraph-width);
        width: 100%;
        padding: 0;
      }

      ul {
        list-style: none;
        margin: 0;
        padding: 0;
      }

      li {
        float: left;
        width: 100%;
        margin-top: 1.5em;
        padding-bottom: 1.5em;
        border-bottom: 1px solid var(--theme-color-monochrome-2);
      }

      dorel-cta {
        width: auto;
        float: left;
        margin-right: 1.5em;
      }

      /* Responsive Behaviour */
      [tablet-medium-up] li {
        padding-bottom: 0;
        border-bottom: 0;
      }

      .results[tablet-medium-up] {
        padding: 3em var(--theme-gutter);
      }

      [tablet-medium-up] .results-content {
        margin: auto;
      }

    </style>

    <dorel-media-query breakpoints="{{ breakpoints }}"></dorel-media-query>

    <div class="results layout horizontal center center-justified wrap" tablet-medium-up$="{{ breakpoints.tabletMediumUp }}">
      <div class="row">
        <div class="results-content">
          <h2 class="title">Results</h2>
          <ul>
            <template is="dom-repeat" items="[[ results ]]" as="store">
              <li>
                <dorel-section-store-locator-result store="[[ store ]]" gtm-parent="[[ gtmParent ]]" gtm-parent-index="[[ gtmParentIndex ]]" gtm-child="[[ gtmChild ]]" gtm-child-index="[[ index ]]"></dorel-section-store-locator-result>
              </li>
            </template>
          </ul>
        </div>
      </div>
    </div>
  </template>

  <script>Polymer({is:"dorel-section-store-locator-results",properties:{results:{type:Object,value:function(){return{}}}}});</script>

</dom-module>
<dom-module id="dorel-section-store-locator" assetpath="../organisms/">
  <template>
    <style is="custom-style" include="iron-flex iron-flex-alignment">

      :host {
        --button-margin-spacing: 0;
      }

      .section-store-locator,
      .store-locator-map {
        position: relative;
        width: 100%;
      }

      .store-title {
        @apply(--theme-typography-4);
        color: var(--theme-brand-color-1);
        width: 100%;
        margin-top: 0;
      }

      .store-locator-map {
        float: left;
      }

      .store-overlay {
        background-color: var(--theme-color-monochrome-2);
        max-width: var(--theme-base-paragraph-width);
        position: initial;
        top: 0;
        right: 0;
        padding: 1.5em .875em;
        border-radius: 0;
        box-sizing: border-box;
        box-shadow: none;
        width: 100%;
        float: left;
      }

      .submit-button-wrapper {
        font-size: 1em;
        float: left;
        width: 100%;
        margin: 0;
        max-width: var(--theme-base-paragraph-width);
        margin-bottom: 1.5em;
      }

      google-map {
        width: 100%;
        height: 90vh;
        position: relative;
        float: left;
      }

      form {
        float: left;
        margin-top: 1.5em;
        width: 100%;
      }

      dorel-cta {
        float: left;
        width: 100%;
      }

      /* Responsive Behaviour */
      [tablet-medium-up] .store-overlay{
        background-color: var(--theme-color-white);
        box-shadow: -1.5px 1.5px 10px rgba(0, 0, 0, 0.125);
        position: absolute;
        top: 1.5em;
        right: 1.5em;
        padding: 1.5em;
        width: 300px;
        z-index: 1000;
        border-radius: var(--theme-border-radius-2);
      }

      [tablet-medium-up] google-map {
        height: 37.5em;
      }
    </style>

    <iron-ajax auto="" url="[[ countriesEndPoint ]]" handle-as="json" on-response="_countriesLoaded"></iron-ajax>

    <iron-ajax auto="" url="[[ storesEndPoint ]]" handle-as="json" on-response="_storesLoaded"></iron-ajax>

    <template is="dom-if" if="[[ _hasProps(templateData) ]]">
      <google-maps-api id="api" api-key="[[ apiKey ]]" language="[[ language ]]" on-api-load="_mapApiLoaded"></google-maps-api>
    </template>

    
    <iron-a11y-keys id="a11y" target="[[_form]]" keys="enter" on-keys-pressed="_submitLocator"></iron-a11y-keys>

    
    <dorel-media-query breakpoints="{{ breakpoints }}"></dorel-media-query>

    <dorel-section-header section-header-data="[[ templateData.acf ]]" info-header="true" text-header="true"></dorel-section-header>
    <section class="section-store-locator" tablet-medium-up$="{{ breakpoints.tabletMediumUp }}">
      <div class="store-locator-map">
        <div class="store-overlay">
          <h2 class="store-title">Enter a Location</h2>
          <form is="iron-form" method="get" action="/" id="store-locator-form">

            

            <dorel-input id="address-input" label="Type in address" value="{{ addressInput }}" error-message="{{ addressError }}" invalid$="{{ addressInvalid }}" disabled$="[[ !selectedCountry ]]" required=""></dorel-input>

            <h2 class="submit-button-wrapper">
              <dorel-cta id="submit-button" on-click="_submitLocator" disabled$="{{ _isDisabled(addressInput) }}" type="primary" link="" size="small" icon="dorel-icons:chevron-right" gtm-action="submit-stores" gtm-parent="[[ gtmParent ]]" gtm-parent-index="[[ gtmParentIndex ]]" gtm-cta-index="0">Find Stores
              </dorel-cta>
            </h2>
          </form>

        </div>
        <template is="dom-if" if="{{ breakpoints.tabletMediumUp }}">
          <template is="dom-if" if="[[ apiLoaded ]]">
            <google-map id="googleMap" language="[[ language ]]" map="{{ map }}" disable-zoom="[[ disableZoom ]]" api-key="[[ apiKey ]]" latitude="{{ mapLat }}" longitude="{{ mapLng }}" zoom="{{ mapZoom }}" fit-to-markers="" map-type="roadmap" styles="[[ styles ]]" disable-map-type-control="" disable-street-view-control="" single-info-window="">

              <template is="dom-repeat" items="{{ storesResponse.results }}" as="store">
                <google-map-marker latitude="[[ storesResponse.originalLat ]]" longitude="[[ storesResponse.originalLng ]]" icon="/assets/images/markers/home-marker.png"></google-map-marker>

                <google-map-marker latitude="[[ store.lat ]]" longitude="[[ store.lng ]]" store="[[ store ]]" click-events="true" icon="[[ _defineStoreType(store.is_vip) ]]">

                  
                  <template is="dom-if" if="[[ store.name ]]">
                    <h3 class="location-title" style="font-size: 1.7500em;line-height: 1.7143em;margin:0;font-weight: 400">[[ store.name
                      ]]</h3>
                  </template>

                  <p class="location-content" style="margin:0">
                    <template is="dom-if" if="[[ store.city ]]">[[ store.city ]]<br></template>
                    <template is="dom-if" if="[[ store.address ]]">[[ store.address ]]<br></template>
                    <template is="dom-if" if="[[ store.postal_code ]]">[[ store.postal_code ]]<br></template>
                  </p>

                  <template is="dom-if" if="[[ store.address ]]">
                    <a style="margin-right:1.5em;color: #004178;fill: #004178;text-decoration: none; margin-top: 1.5em" class="marker-anchor" href="http://maps.google.com/maps?z=16&amp;daddr=[[ store.address ]],+[[ store.city ]],+[[ store.country ]],+[[ store.postal_code ]]" title="Plan route" target="_blank">Plan route
                      <iron-icon class="theme-cta__icon" icon="dorel-icons:location"></iron-icon>
                    </a>
                  </template>

                  <template is="dom-if" if="[[ store.phone_number ]]">
                    <a style="margin-right:1.5em;color: #004178;fill: #004178;text-decoration: none; margin-top: 1.5em" href="tel:{{ store.phone_number }}" title="Call" target="_blank">
                      [[ store.phone_number ]]
                      <iron-icon class="theme-cta__icon" icon="dorel-icons:call"></iron-icon>
                    </a>
                  </template>
                  <template is="dom-if" if="[[ store.online_shop.url ]]">
                    <a style="margin-right:1.5em;color: #004178;fill: #004178;text-decoration: none; margin-top: 1.5em" href="[[ store.online_shop.url ]]" title="Visit website" target="_blank">
                      Visit website
                      <iron-icon class="theme-cta__icon" icon="dorel-icons:external-link"></iron-icon>
                    </a>
                  </template>
                </google-map-marker>
              </template>
            </google-map>
          </template>
        </template>
      </div>

      <template is="dom-if" if="[[  storesResponse.results ]]">
        <dorel-section-store-locator-results results="[[ storesResponse.results ]]" gtm-parent="[[ gtmParent ]]" gtm-parent-index="[[ gtmParentIndex ]]" gtm-child="dorel-section-store-locator-results"></dorel-section-store-locator-results>
      </template>
    </section>
  </template>

  <script>Polymer({is:"dorel-section-store-locator",properties:{templateData:{type:Object,value:function(){return{}}},apiLoaded:{type:Boolean,value:!1,observer:"_initStoreLocator"},_form:{type:Object,value:function(){return this.$["store-locator-form"]}},language:{type:String,value:CONFIG.LOCALE.LANGUAGE},apiKey:{type:String,value:"AIzaSyBYMyWp_Ex0Vti2UUDNOs979yVJ5sts1iA"},disableZoom:{type:Boolean,value:!0},mapLoaded:{type:Boolean,value:!1},countriesResponse:{type:Object,value:function(){return{}}},countryStoresArr:{type:Array,value:[]},selectedCountry:{type:Object,value:{label:CONFIG.LOCALE.COUNTRY_NAME.charAt(0).toUpperCase()+CONFIG.LOCALE.COUNTRY_NAME.slice(1),value:CONFIG.LOCALE.COUNTRY_CODE}},addressInvalid:{type:Boolean,value:!1},styles:{type:Array,value:[{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]}]}},listeners:{"google-map-ready":"_mapLoaded"},observers:["_setMapZoom(mapLoaded, geometry)","_setMapFocus(mapLoaded, selectedCountry)"],_mapApiLoaded:function(){this.apiLoaded=!0},_initStoreLocator:function(e){void 0!==e&&e&&(this.geocoder=new google.maps.Geocoder,this.autocomplete=new google.maps.places.AutocompleteService,this.countriesEndPoint=this.globals.Dorel.dioApiUrl+"/retailers/countries?brandName=maxi_cosi&localeCode="+this.language)},_mapLoaded:function(){this.mapLoaded=!0},_setMapFocus:function(e,t){if(e&&void 0!==t&&void 0!==this.geocoder){var s=this;this._retrieveGeocode(t.label).then(function(e){s.mapLat=e.location.lat(),s.mapLng=e.location.lng(),s.geometry=e})}},_setMapZoom:function(e,t){e&&void 0!==t&&this.map.fitBounds(t.viewport)},_countriesLoaded:function(e){this.countriesResponse=e.detail.response},_storesLoaded:function(e){e.detail.response.results.length||this._handleErrors("ZERO_RESULTS"),this.storesResponse=e.detail.response;var t={org:{lat:this.storesResponse.originalLat,lng:this.storesResponse.originalLng},res:{lat:this.storesResponse.results[this.storesResponse.totalResults-1].lat,lng:this.storesResponse.results[this.storesResponse.totalResults-1].lng}},s=new google.maps.LatLng(t.org.lat,t.org.lng),o=new google.maps.LatLng(t.res.lat,t.res.lng),r=new google.maps.LatLngBounds;r.extend(s),r.extend(o),this.map.fitBounds(r)},_submitLocator:function(e){if(void 0!==this.addressInput&&this.address!==this.addressInput){if(""===this.addressInput)return void this._handleErrors("ADDRESS_EMPTY");this.$["address-input"].invalid=!1,this.addressInvalid=!1,this.storesResponse={results:[]};var t=this,s=this.addressInput+" "+this.selectedCountry.label;this.address=this.addressInput,this.predictions=this._retrieveSuggestions(s).then(function(e){t._retrieveGeocode(e.description).then(function(e){var s="&lat="+e.location.lat();s+="&lng="+e.location.lng(),s+="&country="+t.selectedCountry.value,s+="&radius=5",t.storesEndPoint=t.globals.Dorel.dioApiUrl+"/retailers?brandName=maxi_cosi"+s},function(e){t._handleErrors(e)})},function(e){t._handleErrors(e)})}},_retrieveGeocode:function(e){var t=this;return new Promise(function(s,o){t.geocoder.geocode({address:e},function(e,t){"OK"===t?s(e[0].geometry):o(t)})})},_retrieveSuggestions:function(e){var t=this;return new Promise(function(s,o){t.autocomplete.getQueryPredictions({input:e},function(e,t){t!=google.maps.places.PlacesServiceStatus.OK?o(t):s(e[0])})})},_isDisabled:function(e){return void 0===e||""===e},_defineStoreType:function(e){return void 0!==e&&e?"/assets/images/markers/vip-marker.png":"/assets/images/markers/shop-marker.png"},_handleErrors:function(e){switch(e){case"ZERO_RESULTS":this.addressError="No results found for this address!";break;case"ADDRESS_EMPTY":this.addressError="This field cannot be empty"}this.$["address-input"].invalid=!0,this.addressInvalid=!0},_hasProps:function(e){var t=!1;for(var s in e)t=!!e.hasOwnProperty(s);return t}});</script>
</dom-module>
</div><dom-module id="dorel-template-store-locator">
  <template>
    <dorel-section-store-locator template-data="[[ templateData ]]" gtm-parent="dorel-section-store-locator" gtm-parent-index="0"></dorel-section-store-locator>
  </template>

  <script>Polymer({is:"dorel-template-store-locator",properties:{templateData:{type:Object,value:function(){return{}}}}});</script>
</dom-module>
</body></html>