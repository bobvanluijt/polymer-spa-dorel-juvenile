<html><head><link rel="import" href="../../bower_components/iron-collapse/iron-collapse.html">

</head><body><dom-module id="dorel-section-product-accordions">
  <template>
    <style>
      :host {
        @apply(--max-width-host);
      }

      .section-product-accordions {
        @apply(--max-width-container);
        float: left;
        width: 100%;
        padding: 4.5em var(--theme-gutter) 3em var(--theme-gutter);
        box-sizing: border-box;
      }

      .row {
        @apply(--theme-grid-row);
        @apply(--layout-flex);
      }

      .accordion {
        @apply(--theme-grid-column);
        -ms-flex-preferred-size: calc(var(--theme-column-width) * 6);
        flex-basis: calc(var(--theme-column-width) * 6);
        max-width: calc(var(--theme-column-width) * 6);
        padding: 0 .75em;
        margin: auto;
      }

      .accordion-heading {
        @apply(--theme-typography-3);
        margin-top: 0;
        padding: 1.5rem;
        transition: color .3s ease;
        color: var(--theme-color-text-link);
      }

      .accordion-heading:focus, .accordion-heading:hover {
        cursor: pointer;
        color: var(--theme-color-text-link-active);
        outline: none;
      }

      .accordion-container {
        box-shadow: inset 0 -2px 0 0 var(--theme-color-monochrome-2);
        position: relative;
        float: left;
        width: 100%;
      }

      .accordion-container:first-child {
        box-shadow: inset 0 -2px 0 0 var(--theme-color-monochrome-2), inset 0 2px 0 0 var(--theme-color-monochrome-2);

      }

      .accordion-content {
        padding: 0 1.5em 1.5em 1.5em;
        margin-top: -1.5em;
        float: left;
        width: 100%;
      }

      .accordion-icon {
        position: absolute;
        top: 1.5em;
        right: 1em;
        color: var(--theme-color-text-link);
        z-index: -1;
        transition: .3s ease color, .3s ease transform;
      }

      .accordion-heading:focus + .accordion-icon, .accordion-heading:hover + .accordion-icon {
        color: var(--theme-color-text-link-active);
      }

      .accordion-heading[aria-expanded='true'] + .accordion-icon {
        transform: rotate(180deg);
      }

      /* Responsive Behaviour */
      [mobile-small] .accordion, [mobile-medium] .accordion, [tablets] .accordion {
        -ms-flex-preferred-size: 100%;
        flex-basis: 100%;
        max-width: 100%;
      }

      .section-product-accordions[mobile-medium], .section-product-accordions[mobile-small] {
        padding: 3em var(--theme-gutter-mobile) 1.5em var(--theme-gutter-mobile);
      }

      [mobile-small] .accordion-heading, [mobile-medium] .accordion-heading {
        padding-left: 0;
      }

      [mobile-small] .accordion-content, [mobile-medium] .accordion-content {
        padding: 0 0 1.5em 0;
      }

    </style>


    <template is="dom-if" if="[[ accordionsData.accordions.length ]]">
      
      <iron-media-query query="(max-width : 479px)" query-matches="{{ mobileSmall }}"></iron-media-query>
      <iron-media-query query="(min-width : 480px) and (max-width : 767px)" query-matches="{{ mobileMedium }}"></iron-media-query>
      <iron-media-query query="(min-width : 768px) and (max-width : 991px)" query-matches="{{ tablets }}"></iron-media-query>
      <iron-media-query query="(min-width : 767px) and (max-width : 1600[x)" query-matches="{{ screenLarge }}"></iron-media-query>

      <section class="section-product-accordions layout horizontal" mobile-small$="{{ mobileSmall }}" mobile-medium$="{{ mobileMedium }}" tablets$="{{ tablets }}">

        <div class="row center center-justified">
          <div class="accordion">
            <template is="dom-repeat" items="[[ accordionsData.accordions ]]" as="accordion">
              <div class="accordion-container">
                <template is="dom-if" if="[[ _hasValue(accordion.heading) ]]">
                  <h2 class="accordion-heading" aria-expanded="false" tabindex="0" role="button" aria-controls$="#collapse{{ index }}" data-selector$="#collapse{{ index }}" on-click="_toggleCollapse" gtm-parent="[[ gtmParent ]]" gtm-parent-index="[[ gtmParentIndex ]]" gtm-cta-index$="[[ index ]]">[[ accordion.heading ]]</h2>
                  <iron-icon class="accordion-icon" icon="dorel-icons:expand-more"></iron-icon>
                </template>
                <iron-collapse id$="collapse{{ index }}">
                  <template is="dom-if" if="[[ _hasValue(accordion.content) ]]">
                    <div class="accordion-content">
                      <dorel-safe-html html="[[ accordion.content ]]"></dorel-safe-html>
                    </div>
                  </template>
                </iron-collapse>
              </div>
            </template>
          </div>

        </div>

      </section>
    </template>
  </template>
  <script>Polymer({is:"dorel-section-product-accordions",properties:{accordionsData:{type:Object,value:function(){return{}}}},_getIconState:function(e){return opened},_toggleCollapse:function(e){var t="true"==e.target.getAttribute("aria-expanded");e.target.setAttribute("aria-expanded",!t);var n=e.target.dataset.selector,r=this.$$(n).classList.contains("iron-collapse-opened");this.$$(n).toggle(),this._eventTracking(e,e.target,r)},_hasValue:function(e){return"undefined"!=typeof e||""!==e},_eventTracking:function(e,t,n){var r=(Polymer.globalsManager.get("Dorel"),t.getAttribute("gtm-cta-index"));Polymer.globalsManager.set("Dorel.events",{action:"toggle-accordion",component:"accordion",structure:{name:this.gtmParent,index:Number(this.gtmParentIndex)+1,event:{name:"accordion-heading",index:Number(r)+1,state:n?"closed":"open"}},element:t.innerHTML,event:"polymer_event",things:{currentState:n?"open":"closed",targetState:n?"closed":"open"}})}});</script>
</dom-module>
</body></html>