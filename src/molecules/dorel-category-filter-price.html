<link rel="import" href="../atoms/dorel-slider.html">

<dom-module id="dorel-category-filter-price">
  <template>
    <style include="iron-flex iron-flex-alignment">
      :host {
        @apply(--max-width-container);
        display: flex;
        width: 100%;
      }
      .slider-wrapper {
        display: flex;
        flex-direction: column;
        width: 100%;
        margin-bottom: 1em;
      }
    </style>

    <div class="slider-wrapper">
      <div>Max: â‚¬[[ price ]],- </div>
      <dorel-slider snaps
                    max="2000"
                    max-markers="8"
                    step="5"
                    slider-value="{{ price }}">
      </dorel-slider>
    </div>
  </template>
  <script>
    Polymer({
      is: 'dorel-category-filter-price',
      properties: {

        colors: {
          type: Array,
          value: function() {
            return [];
          }
        },

        price: {
          type: Number,
          value: 0
        },

        queryParams: {
          type: Object,
          notify: true
        },

      },

      observers: [
        '_setPrice(price)'
      ],

      attached: function() {
        var price = this.queryParams && this.queryParams.price ? parseInt(this.queryParams.price) : 0;
        this.set('price', price);
      },

      _setPrice: function(price) {
        var queryParams = this.queryParams || {};

        var exists = queryParams.price ? queryParams.price : null;

        if(price === 0 && exists) {
          delete queryParams.price;
        } else {
          queryParams.price = price;
        }
        this.fire('update-filter', { value: queryParams });
      }

    });
  </script>

</dom-module>
