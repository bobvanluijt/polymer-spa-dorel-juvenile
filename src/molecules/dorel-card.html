<link rel="import" href="../atoms/dorel-cta.html">

<dom-module id="dorel-card">
  <template>
    <style include="iron-flex">
			.card {
        width: 65%;
        margin: auto;
				padding: 2.25rem;
				position: relative;
				z-index: 1;
			}
			/*
			* Firefox rendering fix: The skewed container is now placed in a psuedo-selector behind actual content.
			* The Skew/Unskew method can create ugly text-rendering in Firefox, and unpredictable behaviour or appearance
			* of nested sub-elements.
			*/
			.card::before {
				background-color: rgba(255, 255, 255, .8);
				border-radius: 45px;
				transform: skewY(-4deg) translateZ(-1px);
        content: '';
				width: 100%;
				height: 100%;
				position: absolute;
				left: 0;
				top: 0;
				display: block;
				/* Safari rendering fix: The negative z-index places the background behind the content */
				z-index: -1;
			}

      dorel-cta {
        @apply(--layout-horizontal-reverse);
      }

      .card-wrap .theme-headline {
        @apply(--theme-heading);
        font-size: 2rem;
        margin: 0;
      }

      #dorel-card p {
        margin-bottom: 2.5rem;
      }

      /**
      * Responsive definitions
      */
      .card[mobile-small], .card[mobile-medium]{
        width: 100%;
        margin: 0;
      }
    </style>


    <div class="card">
      <!-- cardTitle -->
      <template
        is="dom-if"
        if="{{ hasValue(cardData.card_image) }}">
        <img src="[[ cardData.card_image ]]" alt="" title="" width="150" />
      </template>
      <!--// cardTitle -->

      <!-- cardTitle -->
      <template
        is="dom-if"
        if="{{ hasValue(cardData.card_title) }}">
        <h1 class="theme-headline">[[ cardData.card_title ]]</h1>
      </template>
      <!--// cardTitle -->

      <!-- cardContent -->
      <template
        is="dom-if"
        if="{{ hasValue(cardData.card_text) }}">
        <dorel-safe-html html="[[ cardData.card_text ]]"></dorel-safe-html>
      </template>
      <!--// cardContent -->

      <!-- ctaToggle -->
      <template
        is="dom-if"
        if="{{ hasValue(cardData.cta_toggle) }}">
        <dorel-cta
          type="tertiary"
          link="[[ cardData.cta_link ]]"
          link-target="[[ cardData.cta_link_target ]]"
          size="small"
          icon="dorel-icons:chevron-right">
            [[ cardData.cta_text ]]
          </dorel-cta>  
      </template>
      <!--// ctaToggle -->

    </div>

  </template>

  <script>

    Polymer({
      is: 'dorel-card',

      properties: {

        /**
         * @attribute
         * @name cardData
         * @description data coming from ACF/Wordpress needed to build up this component
         */
        cardData: {
          type: Object
        }

      },
      
      /**
       * @name hasValue
       * @description checks to see if a value is not empty, undefined or null
       */
      hasValue: function(val) {
        return (typeof val !== '' && val !== 'undefined' && val !== null);
      }
    });

  </script>

</dom-module>
