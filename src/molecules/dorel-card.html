<link rel="import" href="../atoms/dorel-cta.html">

<dom-module id="dorel-card">
  <template>
    <style include="iron-flex">
      :host {
        @apply(--layout-horizontal);
      }

      .card {
        background-color: var(--theme-color-white);
        border-radius: .5em;
        float: left;
        margin-top: 1.5em;
        overflow: hidden;

        -webkit-box-shadow: 10px 10px 10px -12px var(--theme-color-monochrome-3);
        -moz-box-shadow: 10px 10px 10px -12px var(--theme-color-monochrome-3);
        box-shadow: 10px 10px 10px -12px var(--theme-color-monochrome-3);
      }

      .title {
        @apply(--theme-typography-6);
        color: var(--theme-brand-color-1);
        float: left;
        width: 100%;
      }

      .description {
        @apply(--theme-typography-2);
        float: left;
        width: 100%;
      }

      .card-content {
        padding: 0 1.5em 1.5em 1.5em;
        float: left;
        width: 100%;
        box-sizing: border-box;
      }

      dorel-cta {
        float: left;
      }

      .card-image {
        width: 100%;
        float: left;
        height: 12em;
      }

      [mobile-small] .title, [mobile-medium] .title {
        @apply(--theme-typography-5);
      }

    </style>

    <!-- media queries -->
    <iron-media-query query="(max-width : 479px)"
                      query-matches="{{ mobileSmall }}"></iron-media-query>
    <iron-media-query query="(min-width : 480px) and (max-width : 767px)"
                      query-matches="{{ mobileMedium }}"></iron-media-query>


    <div class="card"
         mobile-small$="{{ mobileSmall }}"
         mobile-medium$="{{ mobileMedium }}">
      <!-- cardImage -->
      <template
        is="dom-if"
        if="{{ hasValue(cardData.card_image) }}">
        <iron-image class="card-image"
                    sizing="cover"
                    fade="true"
                    preload
                    placeholder="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAARUlEQVQYVx3LsQ2AQAwEwXPP9EIt9EADBOcMkRG8Lfk+MnrCHWltO709BIbgKdh+Pc0oeE5wFOy43/5jYQjGqOYQmGsrfE+bLy6etpfQAAAAAElFTkSuQmCC"
                    src$="[[ cardData.card_image ]]">
        </iron-image>
      </template>
      <!--// cardImage -->

      <div class="card-content">
        <!-- cardTitle -->
        <template
          is="dom-if"
          if="{{ hasValue(cardData.card_title) }}">
          <h3 class="title">[[ cardData.card_title ]]</h3>
        </template>
        <!--// cardTitle -->

        <!-- cardContent -->
        <template
          is="dom-if"
          if="{{ hasValue(cardData.card_text) }}">
          <p class="description">
            <dorel-safe-html html="[[ cardData.card_text ]]"></dorel-safe-html>
          </p>
        </template>
        <!--// cardContent -->

        <!-- ctaToggle -->
        <template
          is="dom-if"
          if="{{ hasValue(cardData.cta_toggle) }}">
          <dorel-cta
            type="primary"
            title="[[ cardData.cta_text ]]"
            link="[[ cardData.cta_link ]]"
            link-target="[[ cardData.cta_link_target ]]"
            size="small"
            icon="dorel-icons:chevron-right">
            [[ cardData.cta_text ]]
          </dorel-cta>
        </template>
        <!--// ctaToggle -->
      </div>
    </div>

  </template>

  <script>

    Polymer({
      is: 'dorel-card',

      properties: {

        /**
         * @attribute
         * @name cardData
         * @description data coming from ACF/Wordpress needed to build up this component
         */
        cardData: {
          type: Object
        }

      },

      /**
       * @name hasValue
       * @description checks to see if a value is not empty, undefined or null
       */
      hasValue: function (val) {
        return (typeof val !== '' && val !== 'undefined' && val !== null);
      }
    });

  </script>

</dom-module>
