<dom-module id="wp-collect-page">
  <template>
    <style></style>
    
    <iron-ajax
      auto 
      url="[[ wpUrl ]]/wp/v2/pages/[[ pageId ]]" 
      handle-as="json"
      on-response="_pageLoaded"></iron-ajax>
  </template>

  <script>
    Polymer({
      is: 'wp-collect-page',
      properties: {
        /**
         * `pageData` this variable is reflected
         * by two way binding in order to use it in your
         * template.
         */
        pageData: {
          type: Object,
          reflectToAttribute: true,
          notify: true
        },

        /**
         * `pageId` of the Wordpress ID of the page
         */
        pageId: {
          type: Number
        },

        /**
         * `wpUrl` of the url of the Wordpress instance
         */
        wpUrl: {
          type: String
        }
      },

      _pageLoaded: function(data) {
        var page = data.detail.response;

        // to retrieve the menu use Polymer.globalsManager.get('Dorel');
        Polymer.globalsManager.set('Dorel', {
          collect: {
            page: page
          }
        });
      }
    });
  </script>
</dom-module>
