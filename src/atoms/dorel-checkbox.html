<link rel="import" href="../../bower_components/iron-checked-element-behavior/iron-checked-element-behavior.html">

<dom-module id="dorel-checkbox">
  <template>
    <style>
      :host {
        display: block;
        width: auto;
        position: relative;
        float: left;
      }

      :host([invalid]) span {
        color: var(--theme-color-error);
      }

      label {
        cursor: pointer;
        margin-left: .25em;
        transition: color .3s ease;
        user-select: none;
      }

      label:before {
        box-sizing: border-box;
        content: '';
        background: var(--theme-checkbox-background-color);
        border: 1px solid var(--theme-checkbox-border-color);
        display: inline-block;
        width: auto;
        cursor: pointer;
        position: absolute;
        width: 1.25em;
        height: 1.25em;
        top: 0.125em;
        left: 0;
        border-radius: var(--theme-border-radius-0);
        transition: border-color .3s ease;
      }

      label:after {
        box-sizing: border-box;
        opacity: 0.2;
        content: '';
        position: absolute;
        width: 1em;
        height: .5em;
        background: transparent;
        top: .375em;
        left: .125em;
        border: .125em solid var(--theme-checkbox-check-color);
        border-top: none;
        border-right: none;
        transform: rotate(-45deg);
        transition: opacity .3s ease;
      }

      label:hover {
        color: var(--theme-checkbox-hover-color);
      }

      label:hover:before {
        border-color: var(--theme-checkbox-hover-color)
      }

      input[type=checkbox]:checked + label:after {
        opacity: 1;
      }

      input {
        float: left;
        display: inline-block;
        width: 1.5em;
        height: 1.5em;
        font-size: 1em;
        margin: 0;
      }
    </style>

    <input type="checkbox" id="dorel-checkbox-input" on-click="_onCheck">
    <label class="label" for="dorel-checkbox-input">[[ label ]]</label>

  </template>
  <script>
    Polymer({
      is: 'dorel-checkbox',

      properties: {
        /**
         * @name checked
         * @description The value set to the checkbox
         */
        checked: {
          type: Boolean,
          value: false,
        },
      },
      behaviors: [
        Polymer.IronCheckedElementBehavior
      ],
      /**
       * @name attached
       * @description Attached callback, sets the native checkbox to the component's checked property
       */
      attached: function () {
        this.$['dorel-checkbox-input'].checked = this.checked;

      },
      /**
       * @name _onCheck
       * @description event binding the synchronises the native checkbox with the components' checked property
       */
      _onCheck: function () {
        this.checked = this.$['dorel-checkbox-input'].checked;
      },
    });
  </script>

</dom-module>