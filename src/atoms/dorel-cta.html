<dom-module id="dorel-cta">
  <template>
    <style>
      .theme-cta {
        @apply(--theme-button);
        @apply(--theme-button-primary);
        @apply(--theme-button-small);
      }

      .theme-cta:hover, .theme-cta:focus {
        @apply(--theme-button-active);
      }

      .theme-cta--primary {
        @apply(--theme-button-primary);
      }

      .theme-cta--secondary {
        @apply(--theme-button-secondary);
      }

      .theme-cta--tertiary {
        @apply(--theme-button-tertiary);
      }

      .theme-cta--small {
       @apply(--theme-button-small);
      }

      .theme-cta--medium {
       @apply(--theme-button-medium);
      }

      iron-icon {
        @apply(--theme-button-icon);

      }

    </style>

    <a href$="{{ link }}" class$="theme-cta theme-cta--{{ type }} theme-cta--{{ size }}"
       on-click="clickCTA">
      <content></content>
      <iron-icon icon="[[ icon ]]"></iron-icon>
    </a>
  </template>

  <script>
    Polymer({
      is: 'dorel-cta',

      properties: {

        /**
         * @attribute
         * @name link
         * @description defines the href of the CTA
         */
        link: {
          type: String
        },

        /**
         * @attribute
         * @name type
         * @description defines what type of CTA we are dealing with
         */
        type: {
          type: String
        },

        size: {
          type: String
        },

        icon: {
          type: String
        }
      },

      /**
       * @name clickCTA
       * @description handle the click on a cta link
       */
      clickCTA: function (event) {

        // track the click
        this._eventTracking(event);

      },
      /**
       * @name _eventTracking
       * @description this is for cta tracking only
       * more info http://bit.ly/2nb6I7G
       */
      _eventTracking: function (event) {

        var globals = Polymer.globalsManager.get('Dorel');

        /**
         * Tracking on click for cta
         */
        Polymer.globalsManager.set('Dorel.events', {
          action: 'click',
          component: 'call-to-action',
          element: Polymer.dom(event).localTarget,
          event: 'polymer_event',
          things: {
            'currentPage': document.URL,
            'targetPage': Polymer.dom(event).localTarget.href
          }
        });
      }
    });
  </script>

</dom-module>
