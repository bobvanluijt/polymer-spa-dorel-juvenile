<dom-module id="dorel-cta">
  <template>
    <style include="dorel-animate-classes">
      .theme-cta {
	      @apply(--theme-bodycopy);
        font-size: 1rem;
        line-height: 20px;
        padding: 15px 22px 16px;
        text-decoration: none;
        border-radius: var(--theme-border-radius-large);
        border-width: 2px;
        border-style: solid;
	      font-family: var(--theme-font-sans-serif);
        transition: .3s ease border-color, .3s ease background-color;
      }

      .theme-cta:hover, .theme-cta:focus {
        border-color: var(--theme-color-hover);
        background-color: var(--theme-color-hover);
        text-decoration: none;
        color: var(--theme-white);
      }

      .theme-cta-primary {
        color: var(--theme-white);
        border-color: var(--theme-color-cta);
        background-color: var(--theme-color-cta);
      }

      .theme-cta-secondary {
        color: var(--theme-brand-color-accent-dark-grey);
        border-color: var(--theme-brand-color-accent-medium-grey);
      }
      .light {
        color: white;
        border-color: rgba(255, 255, 255, 0.3);
      }
    </style>
    
    <!-- if type is anchor we are dealing with an anchor -->
    <template
      is="dom-if"
      if="{{ isDefault(type) }}">
      <a href$="{{ link }}" 
        class$="hvr-pop theme-cta theme-cta-{{ type }}"
        on-click="clickCTA">
        <content></content>
      </a>
    </template>

    <template
      is="dom-if"
      if="{{ !isDefault(type) }}">
      <a href$="{{ link }}" class$="hvr-pop theme-cta theme-cta-{{ type }}"
        on-click="clickCTA">
        <content></content>
      </a>
    </template>

  </template>

  <script>
    Polymer({
      is: 'dorel-cta',

      properties: {

        /** 
         * @attribute
         * @name link
         * @description defines the href of the CTA
         */
        link: {
          type: String
        },

        /** 
         * @attribute
         * @name type
         * @description defines what type of CTA we are dealing with
         */
        type: {
          type: String
        }

      },

      /** 
       * @name clickCTA
       * @description handle the click on a cta link
       */
      clickCTA: function(event) {

        // track the click
        this._eventTracking(event);

      },

      /**
       * @name isDefault
       * @description check to see what kind of CTA we are dealing with
       */
      isDefault: function(type) {
        return (type === 'primary' || type === 'secondary');
      },

      /**
       * @name _eventTracking
       * @description this is for cta tracking only
       * more info http://bit.ly/2nb6I7G
       */
      _eventTracking: function(event) {

        var globals = Polymer.globalsManager.get('Dorel');

        /** 
         * Tracking on click for cta
         */
        Polymer.globalsManager.set('Dorel.events', {
          action: 'switch',
          component: 'call-to-action',
          element: Polymer.dom(event).localTarget,
          event: 'polymer_event',
          things: {
            'currentPage': document.URL,
            'targetPage': Polymer.dom(event).localTarget.href
          }
        });
      }
    });
  </script>

</dom-module>
