<dom-module id="dorel-section-indigo">
  <template>
    <style include="polymer-bootstrap-min">
      .section-indigo {
        margin-bottom: 50px;
        position: relative;
      }
      .indigo-column {
        border-radius: 20px;
        min-height: 393px;
        max-height: 393px;
      }
      .indigo-column-overlay {
        background: #fff; /* For browsers that do not support gradients */
        background: -webkit-linear-gradient(#fff, transparent); /* For Safari 5.1 to 6.0 */
        background: -o-linear-gradient(#fff, transparent); /* For Opera 11.1 to 12.0 */
        background: -moz-linear-gradient(#fff, transparent); /* For Firefox 3.6 to 15 */
        background: linear-gradient(#fff, transparent); /* Standard syntax (must be last) */
        height: 50px;
        left: 0;
        top: 0;
        position: absolute;
        width: 100%;
      }
      .content-column {
        padding-top: 50px;
        text-align: center;
      }
      .content-wrap {
        max-width: 360px;
        text-align: left;
      }
      paper-card {
        @apply(--shadow-elevation-8dp);
        border-radius: 20px;
        display: block;
        max-height: 393px;
        max-width: 285px;
      }

      .section-indigo[mobile-small] .indigo-column,
      .section-indigo[mobile-medium] .indigo-column {
        border-radius: 0;
      }
      .section-indigo[tablets] .indigo-column {
        text-align: center;
      }
      .section-indigo[mobile-small] .indigo-column paper-card,
      .section-indigo[mobile-medium] .indigo-column paper-card {
        margin: 50px auto 0 auto;
      }

      .section-indigo[tablets] .indigo-column paper-card {
        margin: 50px auto 0 80px;
      }

      .section-indigo[desktop-small] .indigo-column paper-card,
      .section-indigo[desktop-full] .indigo-column paper-card {
        margin: 50px auto 0 50px;
      }
      
      .section-indigo[mobile-small] .content-wrap,
      .section-indigo[mobile-medium] .content-wrap,
      .section-indigo[tablets] .content-wrap {
        margin: 0 auto;
      }
    </style>

    <!-- media queries -->
    <iron-media-query query="(max-width : 479px)" 
      query-matches="{{ mobileSmall }}"></iron-media-query>
    <iron-media-query query="(min-width : 480px) and (max-width : 767px)" 
      query-matches="{{ mobileMedium }}"></iron-media-query>
    <iron-media-query query="(min-width : 768px) and (max-width : 991px)"
      query-matches="{{ tablets }}"></iron-media-query>
    <iron-media-query query="(min-width : 992px) and (max-width : 1199px)" 
      query-matches="{{ desktopSmall }}"></iron-media-query>
    <iron-media-query query="(min-width : 1200px)" 
      query-matches="{{ desktopFull }}"></iron-media-query>
    
    <section class="section-indigo container"
      mobile-small$="{{ mobileSmall }}"
      mobile-medium$="{{ mobileMedium }}"
      tablets$="{{ tablets }}"
      desktop-small$="{{ desktopSmall }}"
      desktop-full$="{{ desktopFull }}">
      <div class="row">
        
        <!-- product column -->
        <div class$="indigo-column col-xs-12 col-sm-12 col-md-7 col-md-offset-1 pull-[[ indigoData.product_column_alignment ]]"
          style$="
            background-image: url([[ _hasBackgroundImage(indigoData.product_column_background_image) ]]); 
            background-color: [[ indigoData.product_column_background_color ]];">
          <div class="indigo-column-overlay"></div>
 
          <paper-card class="flex" alt="[[ indigoData.product_column_image_title ]]"
            image="[[ _hasPaperImage(indigoData.product_column_image) ]]"></paper-card>

        </div>

        <!-- content column -->
        <div class="content-column col-xs-12 col-sm-12 col-md-4">
          <div class="content-wrap">
            <template
              is="dom-if"
              if="[[ indigoData.content_column_title ]]">
              <h2 class="theme-headline">[[ indigoData.content_column_title ]]</h2>
            </template>
            
            <template
              is="dom-if"
              if="[[ indigoData.content_column_text ]]">
              <dorel-safe-html html="[[ indigoData.content_column_text ]]"></dorel-safe-html>
            </template>
            
            <template
              is="dom-if"
              if="[[ indigoData.content_column_cta_toggle ]]">
              <dorel-cta
                type="[[ indigoData.content_column_cta_type ]]" 
                link="[[ indigoData.content_column_cta_href ]]">
                  [[ indigoData.content_column_cta_text ]]
              </dorel-cta>
            </template>
          </div>
        </div>

      </div>
    </section>
  </template>

  <script>
    Polymer({
      is: 'dorel-section-indigo',

      properties: {
        indigoData: {
          type: Object
        }
      },

      ready: function() {
        this.bgColor = (typeof this.bgColor === 'undefined') ? '#dcdcdc' : this.bgColor;
      },

      _hasBackgroundImage: function(img) {
        return (typeof img === 'undefined' || img === '' || !img) ? 'assets/images/placeholders/indigo/placeholder.jpg' : img;
      },

      _hasPaperImage: function(img) {
        return (typeof img === 'undefined' || img === '' || !img) ? 'assets/images/placeholders/indigo/placeholder.jpg' : img;
      }
    });
  </script>
</dom-module>
