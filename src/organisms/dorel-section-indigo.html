<dom-module id="dorel-section-indigo">
	<template>
		<style>
			.section-indigo {
				width: 100%;
				display: flex;
				justify-content: center;
				position: relative;
			}

			.section-indigo[mobile-small], .section-indigo[mobile-medium] {
				margin-bottom: -110px;
			}

			.section-indigo::before {
				content: "";
				position: absolute;
				top: 0;
				left: 0;
				height: 10px;
				z-index: 1;
				width: 100%;

				/* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#000000+0,000000+100&0.13+0,0+100 */
				background: -moz-linear-gradient(top, rgba(0, 0, 0, 0.13) 0%, rgba(0, 0, 0, 0) 100%); /* FF3.6-15 */
				background: -webkit-linear-gradient(top, rgba(0, 0, 0, 0.13) 0%, rgba(0, 0, 0, 0) 100%); /* Chrome10-25,Safari5.1-6 */
				background: linear-gradient(to bottom, rgba(0, 0, 0, 0.13) 0%, rgba(0, 0, 0, 0) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
				filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#21000000', endColorstr='#00000000', GradientType=0); /* IE6-9 */
			}

			.title {
				padding: var(--theme-component-space-inner);
				color: white;
				font-family: var(--theme-font-sans-serif);
				font-style: normal;
				font-weight: normal;
				/* TODO: get the proper font sizes from Sketch */
				font-size: 3.5em;
				line-height: 1.625;
				text-shadow: -1.5px 1.5px 10px rgba(0, 0, 0, 0.75);
				margin: 0 0 10% 0;
			}

			.title-line {
				max-width: var(--theme-indigo-title-width);
				display: block;
				display: block;
				margin: auto;
			}

			.container {
				max-width: 1480px;
				width: 100%;
				overflow: hidden;
			}

			.image-wrapper {
				overflow: hidden;
				border-radius: 0px 0px 30px 30px;
			}

			.image {
				width: 100%;
				display: block;
				background-position: 50% 50%;
				background-repeat: no-repeat;
				background-size: cover;
				min-height: 500px;
				max-height: 700px;
				height: 75vh;
			}

			.image:before {
				position: absolute;
				top: 0;
				right: 0;
				height: 100%;
				width: 33.33%;
				transform: none;
				content: "";
				height: 100%;
				background: -moz-linear-gradient(left, rgba(255, 255, 255, 0) 1%, rgba(255, 255, 255, 0.02) 4%, rgba(255, 255, 255, 0.75) 100%); /* FF3.6-15 */
				background: -webkit-linear-gradient(left, rgba(255, 255, 255, 0) 1%, rgba(255, 255, 255, 0.02) 4%, rgba(255, 255, 255, 0.75) 100%); /* Chrome10-25,Safari5.1-6 */
				background: linear-gradient(to right, rgba(255, 255, 255, 0) 1%, rgba(255, 255, 255, 0.02) 4%, rgba(255, 255, 255, 0.75) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
			}

			.section-indigo[mobile-small] .image:before, .section-indigo[mobile-medium] .image:before {
				width: 100%;
				background: -moz-linear-gradient(-45deg, rgba(255, 255, 255, 0) 48%, rgba(118, 219, 247, 0.85) 100%); /* FF3.6-15 */
				background: -webkit-linear-gradient(-45deg, rgba(255, 255, 255, 0) 48%, rgba(118, 219, 247, 0.85) 100%); /* Chrome10-25,Safari5.1-6 */
				background: linear-gradient(135deg, rgba(255, 255, 255, 0) 48%, rgba(118, 219, 247, 0.85) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
				filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#00ffffff', endColorstr='#d976dbf7', GradientType=1); /* IE6-9 fallback on horizontal gradient */

			}

			.content-wrapper {
				position: absolute;
				right: 0;
				bottom: 90px;
				width: 50%;
				text-align: center;
			}

			.section-indigo[mobile-small] .content-wrapper, .section-indigo[mobile-medium] .content-wrapper {
				width: 100%;
			}

			.skew {
				transform: skewY(-8deg) translateY(-110px);
			}

			.skew-reset {
				transform: skewY(8deg) translateY(110px);
			}

		</style>

		<!-- media queries -->
		<iron-media-query query="(max-width : 479px)"
		                  query-matches="{{ mobileSmall }}"></iron-media-query>
		<iron-media-query query="(min-width : 480px) and (max-width : 767px)"
		                  query-matches="{{ mobileMedium }}"></iron-media-query>

		<section class="section-indigo"
		         mobile-small$="{{ mobileSmall }}"
		         mobile-medium$="{{ mobileMedium }}">
			<div class="container">
				<div class="image-wrapper skew">
					<div class="image skew-reset" role="img" aria-label="Add image description for accessibility here"
					     style$="
              background-image: url([[ hasBackgroundImage(indigoData.background_image) ]]);"></div>

					<template
									is="dom-if"
									if="{{ hasValue(indigoData.title) }}">
						<div class="content-wrapper skew-reset">
							<h1 class="title">
								<span class="title-line">[[ indigoData.title ]]</span>
							</h1>
						</div>
					</template>
				</div>
		</section>
	</template>

	<script>
		Polymer({
			is: 'dorel-section-indigo',

			properties: {

				/**
				 * @attribute
				 * @name indigoData
				 * @description all data defined by ACF/Wordpress to build this component
				 */
				indigoData: {
					type: Object,
					value: function () {
						return {};
					}
				}

			},

			/**
			 * @name hasBackgroundImage
			 * @description checks to see if a background image is set in Wordpress
			 *
			 * @returns Sting when no image is set it returns the placeholder string
			 */
			hasBackgroundImage: function (img) {
				return (typeof img === 'undefined' || img === '' || !img) ? '/assets/images/placeholders/indigo/placeholder.jpg' : img;
			},

			/**
			 * @name hasBackgroundImage
			 * @description checks to see if a background image is set in Wordpress
			 *
			 * @returns Sting when no image is set it returns the placeholder string
			 */
			hasValue: function (val) {
				return (typeof val !== 'undefined' || val !== '');
			}
		});
	</script>
</dom-module>
