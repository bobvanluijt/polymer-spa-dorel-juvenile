<link rel="import" href="../molecules/dorel-car-details-form.html">
<dom-module id="dorel-car-fitting-age-selection">
  <template>
    <style>
      h1, h2, h3, h4 {
        @apply(--theme-header-text-transform);
      }

      [hidden] {
        display: none;
      }

      .inner-col-left-top {
        min-height: 27rem;
      }

      .notification-box {
        background-color: var(--theme-color-monochrome-1);
        border-radius: var(--theme-button-border-radius);
        padding: 1.8rem;
        margin-top: 1.5rem;
      }

      .image {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        width: 50%;
        display: flex;
        flex: 1;
        z-index: -1000;
      }

      .car-selection, .car-display {
        width: auto;
        height: auto;
        /*background-color: var(--theme-color-monochrome-2);*/
        border-radius: var(--theme-button-border-radius);
        cursor: pointer;
      }

      .car-display {
        background-color: var(--theme-color-monochrome-2);
      }

      .display-container {
        display: flex;
        margin-top: 1.4rem;
      }

      .category-card {
        padding: 1rem 1.5rem 1rem 1.5rem;
        width: auto;
        color: var(--theme-brand-color-2);
        font-size: var(--theme-typography-3_-_font-size);
      }

      .edit-card h3 {
        margin: 0;
      }

      .edit-icon, .delete-icon {
        padding: 2.1em 1.2rem 2.1rem 1.2rem;
        --iron-icon-height: 30px;
        --iron-icon-width: 30px;
      }

      .edit-icon {
        border-right: 4px solid white;
      }
      
      .notification-icon {
        --iron-icon-height: 38px;
        --iron-icon-width: 38px;
        color: var(--theme-brand-color-1);
      }
      
      .step-title {
        font-size: var(--theme-typography-5_-_font-size);
        line-height: var(--theme-typography-5_-_line-height);
        margin-top: var(--theme-typography-5_-_margin-top);
        margin-bottom: var(--theme-typography-5_-_margin-bottom);
        font-weight: var(--theme-typography-5_-_font-weight);
        font-family: var(--theme-typography-5_-_font-family);
      }

    </style>
    <dorel-media-query breakpoints="{{ breakpoints }}"></dorel-media-query>
    <dorel-layout-container>
      <dorel-layout-row align="middle">
        <dorel-layout-column desktop-column-span="5" tablet-column-span="5" mobile-column-span="4" align="left">
            <dorel-layout-row>
                <dorel-layout-column desktop-column-span="9" tablet-column-span="9" mobile-column-span="8" class="inner-col-left-top">
                  <h1 class="step-title">[[ localize(stepData.main_section.title) ]]</h1>
                  <div class="car-display">
                    <div class="display-container" on-tap="selectAge" data-args="1">
                      <div id="category-card-sel-1" class="category-card" data-args="1">
                        [[ localize('car_fitting_age_selection#baby') ]]
                        <br>
                        <small data-args="1">[[ localize('car_fitting_age_selection#age_cat_1') ]]</small>
                      </div>
                      <div id="category-card-res-1" class="category-card" data-args="1" hidden>
                        [[ localize('car_fitting_age_selection#baby_selected') ]]
                        <br>
                        <small data-args="1"></small>
                      </div>
                    </div>
                  </div>
                  <div class="car-display">
                    <div class="display-container" on-tap="selectAge" data-args="2">
                      <div class="category-card" data-args="2">
                        [[ localize('car_fitting_age_selection#toddler') ]]
                        <br>
                        <small data-args="2">[[ localize('car_fitting_age_selection#age_cat_2') ]]</small>
                      </div>
                      <div id="category-card-res-2" class="category-card" data-args="2" hidden>
                        [[ localize('car_fitting_age_selection#toddler_selected') ]]
                        <br>
                        <small data-args="1"></small>
                      </div>
                    </div>
                  </div>
                  <div class="car-display">
                    <div class="display-container" on-tap="selectAge" data-args="3">
                      <div class="category-card" data-args="3">
                        [[ localize('car_fitting_age_selection#child') ]]
                        <br>
                        <small data-args="3">[[ localize('car_fitting_age_selection#age_cat_3') ]]</small>
                      </div>
                      <div id="category-card-res-3" class="category-card" data-args="3" hidden>
                        [[ localize('car_fitting_age_selection#child_selected') ]]
                        <br>
                        <small data-args="1"></small>
                      </div>
                    </div>
                  </div>
                </dorel-layout-column>
            </dorel-layout-row>
            <dorel-layout-row align="middle">
              <dorel-layout-column desktop-column-span="9" tablet-column-span="9" mobile-column-span="8" align="left" class="col-left-bottom">
                <dorel-layout-row align="right">
                  <dorel-layout-column desktop-column-span="6" tablet-column-span="6" mobile-column-span="4" align="left">
                    <dorel-cta title="Call to action"
                                type="primary"
                                link=""
                                size="medium"
                                on-tap="nextStep"
                                id="next_button"
                                hidden$="[[ stepData.hide_buttons ]]">
                      [[  localize(stepData.main_section.primary_cta) ]]
                    </dorel-cta>
                  </dorel-layout-column>
                </dorel-layout-row>
              </dorel-layout-column>
            </dorel-layout-row>
        </dorel-layout-column>
        <dorel-layout-column desktop-column-span="5" tablet-column-span="5" mobile-column-span="4" align="left" class="col-right-top">
          <dorel-layout-row>
            <dorel-layout-column desktop-column-span="9" tablet-column-span="9" mobile-column-span="8" class="inner-col-left-top">
              <div class="notification-box">
                <iron-icon class="notification-icon" icon="dorel-icons:light-bulb"></iron-icon>
                <br><br>
                [[ localize(stepData.sub_section.notification_1) ]]
                <br><br>                
                [[ localize(stepData.sub_section.notification_2) ]]
              </div>
            </dorel-layout-column>
          </dorel-layout-row>
        </dorel-layout-column>
      </dorel-layout-row>
      <template is="dom-if" if="[[ breakpoints.tabletMediumUp ]]">
        <template is="dom-if" if="[[ hasBynderImage(stepData.sub_section.background_image_id) ]]">
          <dorel-bynder-image class="image"
                              derivative-identifier="Fullscreen Retina portrait"
                              sizing="cover"
                              width="100%"
                              height="100%"
                              flex
                              fade="true"
                              media-id$="[[ stepData.sub_section.background_image_id ]]">
          </dorel-bynder-image>
        </template>
      </template>
    </dorel-layout-container>
  </template>
  <script>
    /* global Polymer */
    /* global customElements */
    /* global DorelMultilingualBehavior */
    class DorelCarFittingAgeSelection extends Polymer.mixinBehaviors([DorelMultilingualBehavior], Polymer.Element) {
      static get is() {
        return 'dorel-car-fitting-age-selection';
      }

      hasBynderImage(id) {
        return Boolean(id && id.length);
      }

      nextStep() {
        this.set('stepData.isCurrent', false);
        this.set('stepController.currentStep', this.stepData.nextStep);
      }
      
      selectAge(e) {
        const categoryTmp = e.target.getAttribute('data-args').split(',');
        const category = Number(categoryTmp);
        console.log(category)
        this.set('ageCategory.category', category);
        this.set('ageCategory.label', `car_fitting_age_selection#age_cat_${category}`);
        const item = this.shadowRoot.querySelector(`#category-card-sel-${category}`);
        const selected = this.shadowRoot.querySelector(`#category-card-res-${category}`);
        
      }
    }

    customElements.define(DorelCarFittingAgeSelection.is, DorelCarFittingAgeSelection);
  </script>
</dom-module>
