<link rel="import" href="../atoms/dorel-cta.html">
<link rel="import" href="../atoms/dorel-safe-html.html">

<dom-module id="dorel-section-text-image-block">
  <template>
    <!-- YOUR STYLES HERE -->
    <style>
      /* Mobile first styling */

      :host {
        clear: both;
      }

      .image-container {
        height: 12rem;
        text-align: center;
      }

      .image-container[desktop] {
        height: 100%;
        min-height: 20rem;
      }
      img {
        max-width: 100%;
        max-height: 100%;
      }

      .text-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        min-height: 100%;
      }

      h2 {
        @apply(--theme-typography-6);
      }

      dorel-cta {
        clear: both;
        float: left;
      }
    </style>

    <!-- MEDIA QUERIES are defined underneath the STYLE -->
    <dorel-media-query breakpoints="{{ breakpoints }}"></dorel-media-query>

    <!-- INITIAL SECTION with the MEDIA QUERIES defined as attributes -->
    <!-- NOTE: all Polymer defined attributes are written on a new line with a tab indent! -->
    <section class="dorel-section-text-image-block">
      <dorel-layout-container>
        <dorel-layout-row reverse$="[[ _reverse(breakpoints.tabletMediumUp, imageLeftOnDesktop) ]]">
          <dorel-layout-column desktop-column-span="6" tablet-column-span="6" mobile-column-span="12">
            <div class="image-container" desktop$="[[ breakpoints.tabletMediumUp ]]">
              <img src="[[ blockData.image ]]">
            </div>
          </dorel-layout-column>
          <dorel-layout-column desktop-column-span="6" tablet-column-span="6" mobile-column-span="12">
            <div class="text-container">
              <div>
                <h2 class="title">[[ blockData.title ]]</h2>
                <dorel-safe-html html="[[ blockData.description ]]"></dorel-safe-html>
                <template is="dom-repeat" items="[[ blockData.ctas ]]" as="cta">
                  <dorel-cta type="link" size="medium" link="[[ cta.link ]]">[[ cta.text]]</dorel-cta>
                </template>
              </div>
            </div>
          </dorel-layout-column>
        </dorel-layout-row>
      </dorel-layout-container>
    </section>

  </template>

  <script>
    Polymer({
      is: 'dorel-section-text-image-block',

      properties: {

        /**
        * @name blockData
        * @description title of the item
        */
        blockData: {
          type: Object,
          value: {}
        },

        /**
        * @name imageLeftOnDesktop
        * @description on desktop layout show image on the left
        */
        imageLeftOnDesktop: {
          type: Boolean,
          computed: '_showImageLeft(blockData)'
        }

      },

      behaviors: [
        {
          // behavior defined here because it is only used here
        _reverse: function (deskTop, imageLeftOnDesktop) {
          return !!(!imageLeftOnDesktop && deskTop);
        }
      }],

      /**
       * @name _showImageLeft
       * @description if textblocks succeed each other the image is placed left / right alternatively
       *              to achieve this a counter is placed an the blocks,
       *              if the counter is odd the image is placed on the left.
       */
      _showImageLeft(data) {
        return !!(data.contentBlockCounter && data.contentBlockCounter % 2 !== 0);
      }


    });

  </script>

</dom-module>
