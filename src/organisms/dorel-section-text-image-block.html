<link rel="import" href="../atoms/dorel-cta.html">
<link rel="import" href="../atoms/dorel-safe-html.html">

<dom-module id="dorel-section-text-image-block">
  <template>
    <style>
      :host {
        clear: both;
      }

      .image-container {
        height: 12rem;
        text-align: center;
      }

      .image-container[desktop] {
        height: 100%;
        min-height: 20rem;
      }
      img {
        max-width: 100%;
        max-height: 100%;
      }

      .text-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        min-height: 100%;
      }

      h2 {
        @apply(--theme-typography-6);
      }

      dorel-cta {
        clear: both;
        float: left;
      }
    </style>

    <!-- MEDIA QUERIES are defined underneath the STYLE -->
    <dorel-media-query breakpoints="{{ breakpoints }}"></dorel-media-query>

    <!-- INITIAL SECTION with the MEDIA QUERIES defined as attributes -->
    <!-- NOTE: all Polymer defined attributes are written on a new line with a tab indent! -->
    <section class="dorel-section-text-image-block">
      <dorel-layout-container>
        <dorel-layout-row reverse$="[[ _reverse(breakpoints.tabletMediumUp, componentCounter) ]]">
          <dorel-layout-column desktop-column-span="6" tablet-column-span="6" mobile-column-span="12">
            <div class="image-container" desktop$="[[ breakpoints.tabletMediumUp ]]">
              <dorel-bynder-image media-id="[[ blockData.bynder_image ]]"
                              derivative-identifier="Fullscreen Small landscape"
                              width="100%"
                              height="18em"
                              tablet-width="100%"
                              tablet-height="21em"
                              mobile-width="100%"
                              mobile-height="15em"></dorel-bynder-image>
            </div>
          </dorel-layout-column>

          <dorel-layout-column desktop-column-span="6" tablet-column-span="6" mobile-column-span="12">
            <div class="text-container">
              <div>
                <h2 class="title">[[ blockData.title ]]</h2>
                <dorel-safe-html html="[[ blockData.description ]]"></dorel-safe-html>
                <template is="dom-repeat" items="[[ blockData.ctas ]]" as="cta">
                  <dorel-cta type="link" size="medium" link="[[ cta.link ]]">[[ cta.text]]</dorel-cta>
                </template>
              </div>
            </div>
          </dorel-layout-column>
        </dorel-layout-row>
      </dorel-layout-container>
    </section>

  </template>

  <script>
    Polymer({
      is: 'dorel-section-text-image-block',

      properties: {
        /**
        * @name blockData
        * @description title of the item
        */
        blockData: {
          type: Object,
          value: {}
        },

        componentCounter: {
          type: Number,
          value: 0
        },
      },

      _reverse: function (desktopBreakpoint, componentCount) {
        var imageLeft = !!(componentCount && componentCount % 2 !== 0);

        return !!(desktopBreakpoint && !imageLeft);
      }

    });

  </script>

</dom-module>
