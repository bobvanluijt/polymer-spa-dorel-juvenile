<dom-module id="dorel-section-hero">
  <template>
    <style include="polymer-bootstrap-min">
      :host {
        z-index: 999;
      }
      .section-heroes {
        margin: 3.75rem 0 -3.75rem 0;
        z-index: -1;
        position: relative;
        transform: skewY(5deg);
      }
      .section-heroes .container {
        transform: skewY(-5deg);
      }
      .section-hero .section-hero-wrap {
        background-position: center center;
        background-repeat: no-repeat;
        background-size: cover;
        min-height: 540px;
      }

      .section-hero:last-child {
        padding-bottom: 3.75rem;
      }
      .section-hero-wrap .container {
        padding-top: 10rem;
        padding-bottom: 10rem;
      }
    </style>
    
    <!-- media queries -->
    <iron-media-query query="(max-width : 479px)" 
      query-matches="{{ mobileSmall }}"></iron-media-query>
    <iron-media-query query="(min-width : 480px) and (max-width : 767px)" 
      query-matches="{{ mobileMedium }}"></iron-media-query>
    <iron-media-query query="(min-width : 768px) and (max-width : 991px)"
      query-matches="{{ tablets }}"></iron-media-query>
    <iron-media-query query="(min-width : 992px) and (max-width : 1199px)" 
      query-matches="{{ desktopSmall }}"></iron-media-query>
    <iron-media-query query="(min-width : 1200px)" 
      query-matches="{{ desktopFull }}"></iron-media-query>
    
    <section class="section-heroes container-fluid"
      mobile-small$="{{ mobileSmall }}"
      mobile-medium$="{{ mobileMedium }}"
      tablets$="{{ tablets }}"
      desktop-small$="{{ desktopSmall }}"
      desktop-full$="{{ desktopFull }}">

      <template
        is="dom-repeat"
        items="[[ heroData.hero ]]"
        as="hero">
        <div class="section-hero">
          <div class="section-hero-wrap row"
            style$="background-image: url([[ hasBackgroundImage(hero.background_image) ]]); background-color: [[ hero.background_color ]];">

            <template
              is="dom-if"
              if="[[ hero.card.length ]]">
              <div class="container">
                <div class="row">
                  <div class$="col-sm-6 pull-[[ hero.card_alignment ]]">
                    
                    <template
                      is="dom-repeat"
                      items="[[ hero.card ]]"
                      as="card">
                      <dorel-card card-data="[[ card ]]" skewed></dorel-card>
                    </template>

                  </div>
                </div>
              </div>
            </template>
          </div>

          </div>
        </div>
      </template>

    </section>

  </template>

  <script>

    Polymer({
      is: 'dorel-section-hero',

      properties: {

        /**
         * @attribute
         * @name heroData
         * @description all info from the page-builder needed for the hero component
         */
        heroData: {
          type: Object,
          value: function() {
            return {};
          }
        }

      },

      /** 
       * @name hasBackgroundImage
       * @description checks if a background image is defined in Wordpress if not a placholder is used
       *
       * @returns String returns a placeholder url if nothing is set or the img url if it is
       */
      hasBackgroundImage: function(img) {
        return (typeof img === 'undefined' || img === '' || !img) ? '/assets/images/placeholders/hero/placeholder.jpg' : img;
      }
    });

  </script>

</dom-module>
