<link rel="import" href="../molecules/dorel-card.html">

<dom-module id="dorel-section-heroes">
  <template>
    <style include="iron-flex iron-flex-alignment">

      .section-heroes {
        position: relative;
        height: 750px;
      }

      /**
      * Card layout
      */
      .pull-right, .pull-left {
        width: 50%;
        min-width: 500px;
        margin: auto;
      }

      .pull-right {
        margin-right: 0;
      }

      .pull-left {
        margin-left: 0;
      }

      .pull-left dorel-card {
        margin-top: -10%;
      }

      .section-heroes-wrap dorel-card {
        @apply(--layout-horizontal);
        @apply(--layout-center);
      }

      /**
      * Hero image styling
      */
      .section-heroes-wrap {
        padding: var(--theme-component-space-inner);
        width: calc(100% - 3rem);
        height: 100%;
        position: absolute;
        left: 0;
        top: 0;
        display: block;
        display: flex;
      }

      .section-heroes-image-wrapper {
        transform: skewY(5deg);
        float: left;
        display: block;
        width: 100%;
        height: 750px;
        z-index: -1;

      }

      .section-heroes-image {
        background-position: center center;
        background-repeat: no-repeat;
        background-size: cover;
        width: 100%;
        height: 110%;
        z-index: -1;
      }

      .section-heroes:first-of-type {
        margin-top: 10%;
      }

      .section-heroes:last-of-type {
        margin-bottom: -10%;
      }

      .section-heroes:last-of-type .pull-left,  .section-heroes:last-of-type .pull-right {
        padding-bottom: 10%;
      }

      /**
      * Responsive definitions
      */
      [mobile-small] .pull-right, [mobile-small] .pull-left,
      [mobile-medium] .pull-right, [mobile-medium] .pull-left {
        width: 100%;
        min-width: auto;
      }

    </style>
    
    <!-- media queries -->
    <iron-media-query query="(max-width : 479px)" 
      query-matches="{{ mobileSmall }}"></iron-media-query>
    <iron-media-query query="(min-width : 480px) and (max-width : 767px)" 
      query-matches="{{ mobileMedium }}"></iron-media-query>
    <iron-media-query query="(min-width : 768px) and (max-width : 991px)"
      query-matches="{{ tablets }}"></iron-media-query>
    <iron-media-query query="(min-width : 992px) and (max-width : 1199px)" 
      query-matches="{{ desktopSmall }}"></iron-media-query>
    <iron-media-query query="(min-width : 1200px)" 
      query-matches="{{ desktopFull }}"></iron-media-query>
    
    <section class="section-heroes"
      mobile-small$="{{ mobileSmall }}"
      mobile-medium$="{{ mobileMedium }}"
      tablets$="{{ tablets }}"
      desktop-small$="{{ desktopSmall }}"
      desktop-full$="{{ desktopFull }}">

      <template
        is="dom-repeat"
        items="[[ heroesData.heroes ]]"
        as="hero">

        <div class="section-heroes">
          <div class="section-heroes-image-wrapper">

            <!-- background-image -->
            <iron-image class="section-heroes-image"
              sizing="cover"
              fade="true"
              preload
              placeholder="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAARUlEQVQYVx3LsQ2AQAwEwXPP9EIt9EADBOcMkRG8Lfk+MnrCHWltO709BIbgKdh+Pc0oeE5wFOy43/5jYQjGqOYQmGsrfE+bLy6etpfQAAAAAElFTkSuQmCC"
              src$="[[ hero.background_image ]]">
            </iron-image>

            <!-- overlay image -->
            <iron-image class="section-heroes-image"
              sizing="cover"
              fade="true"
              preload
              placeholder="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAARUlEQVQYVx3LsQ2AQAwEwXPP9EIt9EADBOcMkRG8Lfk+MnrCHWltO709BIbgKdh+Pc0oeE5wFOy43/5jYQjGqOYQmGsrfE+bLy6etpfQAAAAAElFTkSuQmCC"
              src$="[[ hero.overlay_image ]]">
            </iron-image>
          </div>
          <div class="section-heroes-wrap">
            <h2>[[ hero.title ]]</h2>
            <p>[[ hero.sub_title ]]</p>

            <template
              is="dom-if"
              if="[[ hero.cta_toggle ]]">
              <div class="">
                <dorel-cta
                  type="primary"
                  link="[[ hero.cta_href ]]">
                    [[ hero.cta_text ]]
                </dorel-cta>
              </div>
            </template>

          </template>
          </div>
        </div>

      </template>
    </section>
  </template>
  <script>

    Polymer({
      is: 'dorel-section-heroes',

      properties: {

        /**
         * @attribute
         * @name heroesData
         * @description all info from the page-builder needed for the hero component
         */
        heroesData: {
          type: Object,
          value: function() {
            return {};
          }
        }

      },
    });

  </script>

</dom-module>
