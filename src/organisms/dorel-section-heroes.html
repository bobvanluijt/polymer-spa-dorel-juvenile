<link rel="import" href="../molecules/dorel-card.html">

<dom-module id="dorel-section-heroes">
  <template>
    <style include="iron-flex iron-flex-alignment">
      :host {
        @apply(--max-width-host);
      }

      .section-heroes {
        @apply(--max-width-container);
        padding: 0 var(--theme-gutter) var(--theme-gutter) var(--theme-gutter);
        float: left;
        width: 100%;
        box-sizing: border-box;
      }

      .section-heroes[mobile-small], .section-heroes[mobile-medium] {
        padding: 0 var(--theme-gutter-mobile);
      }

      .section-heroes-wrap {
        @apply(--theme-grid-row);
        @apply(--layout-flex);
        position: relative;
        max-width: 1300px;
        float: none;
        margin: auto;
      }

      .section-heroes-image-wrapper {
        @apply(--theme-grid-column);
        -ms-flex-preferred-size: calc(var(--theme-column-width) * 10);
        flex-basis: calc(var(--theme-column-width) * 10);
        max-width: calc(var(--theme-column-width) * 10);
        float: left;
        width: 100%;
        margin-right: calc(var(--theme-column-width) * 2);
        margin-top: 3em;
        padding: 0;
      }

      .section-heroes-image {
        float: left;
        width: 100%;
        height: 28.5em;
        border-radius: 2em;
      }

      .section-heroes-image-overlay {
        position: absolute;
        right: 0;
        width: 10em;
        height: 28.5em;
        width: calc(var(--theme-column-width) * 4);
        top: 10em;

        filter: "progid:DXImageTransform.Microsoft.Dropshadow(OffX=12, OffY=12, Color='#444') ";
        filter: url(#drop-shadow);
        -webkit-filter: drop-shadow(-7px 12px 7px rgba(0, 0, 0, .15));
        filter: drop-shadow(-7px 12px 7px rgba(0, 0, 0, .15));
      }

      .title {
        @apply(--theme-typography-7);
        color: var(--theme-brand-color-1);
      }

      dorel-cta {
        float: left;
      }

      .description {
        @apply(--theme-typography-2);
        max-width: 28em;
      }

      .description-column {
        @apply(--theme-grid-column);
        -ms-flex-preferred-size: calc(var(--theme-column-width) * 4);
        flex-basis: calc(var(--theme-column-width) * 4);
        max-width: calc(var(--theme-column-width) * 4);
        padding: 0 .75em;
        margin-top: 0;
      }

      .section-heroes-wrap:nth-child(even) .section-heroes-image-wrapper {
        margin-right: 0;
        margin-left: calc(var(--theme-column-width) * 2);
      }

      .section-heroes-wrap:nth-child(even) .section-heroes-image-overlay {
        right: initial;
        left: 0;
      }

      .section-heroes-wrap {
        margin-bottom: 1.5em;
      }

      /* Section heroes */
      .section-heroes-image {
        width: 100%;
        height: 100%;
        display: block;
        background-repeat: no-repeat;
        background-size: 100% auto;
      }

      .image-parent {
        width: 100%;
        height: 24em;
        overflow: hidden;
        border-top-right-radius: 2em;
        border-bottom-right-radius: 1em;
        border-top-left-radius: 2.5em;
        margin: 0 auto;
      }

      .image-parent > .image-box {
        width: 100%;
        height: 100%;
        margin: -3em 0 0 0;
        -webkit-transform: skewY(-5deg);
        -moz-transform: skewY(-5deg);
        -o-transform: skewY(-5deg);
        overflow: hidden;
        position: relative;
        border-radius: 2.5em;
      }

      .image-parent > .image-box > .section-heroes-image {
        width: 100%;
        height: 100%;
      }

      .section-heroes-wrap:nth-child(2) .image-parent > .image-box {
        -webkit-transform: skewY(5deg);
        -moz-transform: skewY(5deg);
        -o-transform: skewY(5deg);
      }

      .section-heroes-wrap:nth-child(2) .image-parent {
        border-top-left-radius: 2em;
        border-bottom-left-radius: 1em;
        border-top-right-radius: 2.5em;
      }

      /* Responsive Behaviour */
      [mobile-small] .section-heroes-image-overlay,
      [mobile-medium] .section-heroes-image-overlay,
      [tablets] .section-heroes-image-overlay {
        display: none;
      }

      [mobile-small] .section-heroes-image-wrapper,
      [mobile-medium] .section-heroes-image-wrapper,
      [tablets] .section-heroes-image-wrapper {
        margin-left: 0 !important;
        margin-right: 0;
        -ms-flex-preferred-size: 100%;
        flex-basis: 100%;
        max-width: 100%;

      }

      [mobile-small] .section-heroes-image,
      [mobile-medium] .section-heroes-image {
        height: 18em;
      }

      [tablets] .section-heroes-image {
        height: 21em;
      }

      [mobile-small] .title,
      [mobile-medium] .title {
        @apply(--theme-typography-5);
        margin-top: 0;
      }

      [mobile-small] .description,
      [mobile-medium] .description {
        margin-top: 0;
      }

      [tablets] .description-column {
        -ms-flex-preferred-size: calc(var(--theme-column-width) * 6);
        flex-basis: calc(var(--theme-column-width) * 6);
        max-width: calc(var(--theme-column-width) * 6);
      }

      [mobile-small] .description-column, [mobile-medium] .description-column {
        -ms-flex-preferred-size: 100%;
        flex-basis: 100%;
        max-width: 100%;
      }

    </style>

    <!-- media queries -->
    <iron-media-query query="(max-width : 479px)"
                      query-matches="{{ mobileSmall }}"></iron-media-query>
    <iron-media-query query="(min-width : 480px) and (max-width : 767px)"
                      query-matches="{{ mobileMedium }}"></iron-media-query>
    <iron-media-query query="(min-width : 768px) and (max-width : 991px)"
                      query-matches="{{ tablets }}"></iron-media-query>
    <iron-media-query query="(min-width : 992px) and (max-width : 1199px)"
                      query-matches="{{ desktopSmall }}"></iron-media-query>
    <iron-media-query query="(min-width : 1200px)"
                      query-matches="{{ desktopFull }}"></iron-media-query>

    <section class="section-heroes"
             mobile-small$="{{ mobileSmall }}"
             mobile-medium$="{{ mobileMedium }}"
             tablets$="{{ tablets }}"
             desktop-small$="{{ desktopSmall }}"
             desktop-full$="{{ desktopFull }}">

      <template
        is="dom-repeat"
        items="[[ heroesData.heroes ]]"
        as="hero">
        <div class="section-heroes-wrap layout horizontal center center-justified wrap">
          <div class="section-heroes-image-wrapper">
            <!-- background-image -->
            <div class="image-parent">
              <div class="image-box">
                <iron-image class="section-heroes-image"
                            sizing="cover"
                            fade="true"
                            preload
                            placeholder="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAARUlEQVQYVx3LsQ2AQAwEwXPP9EIt9EADBOcMkRG8Lfk+MnrCHWltO709BIbgKdh+Pc0oeE5wFOy43/5jYQjGqOYQmGsrfE+bLy6etpfQAAAAAElFTkSuQmCC"
                            src$="[[ hero.background_image ]]">
                </iron-image>
              </div>
            </div>
          </div>
          <!-- overlay image -->
          <iron-image class="section-heroes-image-overlay"
                      sizing="contain"
                      fade="true"
                      preload
                      placeholder="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAARUlEQVQYVx3LsQ2AQAwEwXPP9EIt9EADBOcMkRG8Lfk+MnrCHWltO709BIbgKdh+Pc0oeE5wFOy43/5jYQjGqOYQmGsrfE+bLy6etpfQAAAAAElFTkSuQmCC"
                      src$="[[ hero.overlay_image ]]">
          </iron-image>
          <div class="description-column">
            <h3 class="title">[[ hero.title ]]</h3>
            <p class="description">[[ hero.sub_title ]]</p>
            <template
              is="dom-if"
              if="[[ hero.cta_toggle ]]">
              <dorel-cta
                title="[[ hero.cta_text ]]"
                type="primary"
                link="[[ hero.cta_href ]]">
                [[ hero.cta_text ]]
              </dorel-cta>
            </template>
          </div>
        </div>
      </template>
    </section>
  </template>
  <script>

    Polymer({
      is: 'dorel-section-heroes',

      properties: {

        /**
         * @attribute
         * @name heroesData
         * @description all info from the page-builder needed for the hero component
         */
        heroesData: {
          type: Object,
          value: function () {
            return {};
          }
        }

      },
    });

  </script>

</dom-module>
