<dom-module id="dorel-section-heroes">
  <template>
    <style>
      :host {
        margin-bottom: 1.5em;
        float: left;
        width: 100%;
      }

      dorel-layout-row {
        position: relative;
        float: left;
        width: 100%;
        margin: 1.5em 0;
      }

      .section-heroes-image-overlay {
        position: absolute;
        right: 0;
        left: initial;
        top: 10em;
        filter: "progid:DXImageTransform.Microsoft.Dropshadow(OffX=12, OffY=12, Color='#444') ";
        filter: url(#drop-shadow);
        -webkit-filter: drop-shadow(-7px 12px 7px rgba(0, 0, 0, .15));
        filter: drop-shadow(-7px 12px 7px rgba(0, 0, 0, .15));
        width: 33.333%;
        height: auto;
      }

      .title {
        @apply(--theme-typography-5);
        margin-top: 0;
        color: var(--theme-brand-color-1);
      }

      dorel-cta {
        float: left;
        margin-top: 1.5em;
      }

      .description {
        @apply(--theme-typography-2);
        max-width: 28em;
        margin-top: 0;
      }


      .image-parent {
        width: 100%;
        height: 24em;
        overflow: hidden;
        border-top-right-radius: 2em;
        border-bottom-right-radius: 1em;
        border-top-left-radius: 2.5em;
        margin: 0 auto;
      }

      .image-parent > .image-box {
        width: 100%;
        height: 100%;
        margin: -3em 0 0 0;
        -webkit-transform: skewY(-5deg);
        -moz-transform: skewY(-5deg);
        -o-transform: skewY(-5deg);
        overflow: hidden;
        position: relative;
        border-radius: 2.5em;
      }

      dorel-layout-row:nth-child(2) .image-parent > .image-box {
        -webkit-transform: skewY(5deg);
        -moz-transform: skewY(5deg);
        -o-transform: skewY(5deg);
      }

      dorel-layout-row:nth-child(2) .image-parent {
        border-top-left-radius: 2em;
        border-bottom-left-radius: 1em;
        border-top-right-radius: 2.5em;
      }

      [tablet-medium-up] .title {
        @apply(--theme-typography-7);
        margin-top: 0;
      }

      .description-wrapper {
        margin-top: 0;
      }

      [tablet-medium-up] .description-wrapper {
        margin-left: calc(var(--theme-column-width) * 4);
      }


      [desktop-small-up] dorel-layout-row:nth-child(even) .section-heroes-image-wrapper {
        margin-right: 0;
        margin-left: calc(var(--theme-column-width) * 2);
      }

      [desktop-small-up] dorel-layout-row:nth-child(even) .section-heroes-image-overlay {
        right: initial;
        left: 0;
      }

    </style>

    <dorel-media-query breakpoints="{{ breakpoints }}"></dorel-media-query>

    <dorel-layout-container desktop-small-up$="{{ breakpoints.desktopSmallUp }}"
                            tablet-medium-up$="{{ breakpoints.tabletMediumUp }}">
      <template
        is="dom-repeat"
        items="[[ heroesData ]]"
        as="hero">
        <dorel-layout-row align="left">
          <dorel-layout-column class="section-heroes-image-wrapper"
                               desktop-column-span="10" tablet-column-span="12" mobile-column-span="12">
            <!-- background-image -->
            <div class="image-parent">
              <div class="image-box">
                <dorel-bynder-image media-id="[[ hero.bynder_background_image ]]"
                                    derivative-identifier="Widescreen Retina landscape"
                                    mobile-width="100%"
                                    mobile-height="26em"
                                    tablet-width="100%"
                                    tablet-height="26em"
                                    width="100%"
                                    height="26em"></dorel-bynder-image>
              </div>
            </div>
          </dorel-layout-column>
          <template is="dom-if" if="{{ breakpoints.desktopSmallUp }}">
            <!-- overlay image -->
            <dorel-bynder-image class="section-heroes-image-overlay"
                                sizing="contain"
                                media-id="[[ hero.bynder_overlay_image ]]"
                                mobile-derivative-identifier="webimage"
                                derivative-identifier="webimage"
                                mobile-width="100%"
                                mobile-height="28.5em"
                                tablet-width="100%"
                                tablet-height="28.5em"
                                width="100%"
                                height="28.5em"></dorel-bynder-image>
          </template>
          <dorel-layout-column class="description-wrapper" desktop-column-span="4" tablet-column-span="6" mobile-column-span="12">
            <h3 class="title">[[ hero.title ]]</h3>
            <p class="description">[[ hero.sub_title ]]</p>
            <template
              is="dom-if"
              if="[[ hero.cta_toggle ]]">
              <dorel-cta
                title="[[ hero.cta_text ]]"
                size="medium"
                type="primary"
                link="[[ hero.cta_href ]]"
                gtm-parent="[[ gtmParent ]]"
                gtm-parent-index="[[ gtmParentIndex ]]"
                gtm-child="dorel-section-hero"
                gtm-child-index="[[ index ]]"
                gtm-cta-index="0">
                [[ hero.cta_text ]]
              </dorel-cta>
            </template>
          </dorel-layout-column>
        </dorel-layout-row>
      </template>
      </section>
    </dorel-layout-container>
  </template>
  <script>

    Polymer({
      is: 'dorel-section-heroes',
      properties: {
        /**
         * @attribute
         * @name heroesData
         * @description all info from the page-builder needed for the hero component
         */
        heroesData: {
          type: Object,
          value: function () {
            return {};
          }
        }
      },
    });

  </script>

</dom-module>
