<link rel="import" href="../atoms/dorel-cta.html">

<dom-module id="dorel-section-hero-header">
	<template>
		<style>
			.section-hero-header {
				width: 100%;
				display: flex;
				justify-content: center;
				position: relative;
			}

      .container {
        padding: 0 var(--theme-component-space-micro);
      }

			.title {
				padding: var(--theme-component-space-inner);
				color: white;
				font-family: var(--theme-font-sans-serif);
				font-style: normal;
				font-weight: normal;
				/* TODO: get the proper font sizes from Sketch */
				font-size: 3.5em;
				line-height: 1.625;
				text-shadow: -1.5px 1.5px 10px rgba(0, 0, 0, 0.75);
				margin: 0 0 2.5% 0;
			}

			.title-line {
				max-width: var(--theme-hero-header-title-width);
				display: block;
				display: block;
				margin: auto;
			}

			.container {
				max-width: 1480px;
				width: 100%;
				overflow: hidden;
			}

			.image-wrapper {
				overflow: hidden;
				border-radius: 0px 0px 30px 30px;
			}

			.image {
				width: 100%;
				display: block;
				background-position: 50% 50%;
				background-repeat: no-repeat;
				background-size: cover;
				min-height: 500px;
				max-height: 700px;
				height: 75vh;
			}

			.image:before {
				position: absolute;
				top: 0;
				right: 0;
				height: 100%;
				width: 33.33%;
				transform: none;
				content: "";
				height: 100%;
				background: -moz-linear-gradient(left, rgba(255, 255, 255, 0) 1%, rgba(255, 255, 255, 0.02) 4%, rgba(255, 255, 255, 0.75) 100%); /* FF3.6-15 */
				background: -webkit-linear-gradient(left, rgba(255, 255, 255, 0) 1%, rgba(255, 255, 255, 0.02) 4%, rgba(255, 255, 255, 0.75) 100%); /* Chrome10-25,Safari5.1-6 */
				background: linear-gradient(to right, rgba(255, 255, 255, 0) 1%, rgba(255, 255, 255, 0.02) 4%, rgba(255, 255, 255, 0.75) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
			}

			.section-hero-header[mobile-small] .image:before, .section-hero-header[mobile-medium] .image:before {
				width: 100%;
				background: -moz-linear-gradient(-45deg, rgba(255, 255, 255, 0) 48%, rgba(118, 219, 247, 0.85) 100%); /* FF3.6-15 */
				background: -webkit-linear-gradient(-45deg, rgba(255, 255, 255, 0) 48%, rgba(118, 219, 247, 0.85) 100%); /* Chrome10-25,Safari5.1-6 */
				background: linear-gradient(135deg, rgba(255, 255, 255, 0) 48%, rgba(118, 219, 247, 0.85) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
				filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#00ffffff', endColorstr='#d976dbf7', GradientType=1); /* IE6-9 fallback on horizontal gradient */

			}

			.content-wrapper {
				position: absolute;
				right: 0;
        bottom: 135px;
				width: 50%;
				text-align: center;
			}

      .content-wrapper[mobile-small], .content-wrapper[mobile-medium]  {
        bottom: 90px;
      }

			.section-hero-header[mobile-small] .content-wrapper, .section-hero-header[mobile-medium] .content-wrapper {
				width: 100%;
			}

			.skew {
				transform: skewY(-8deg) translateY(-110px);
			}

			.skew-reset {
				transform: skewY(8deg) translateY(110px);
			}

      dorel-cta {
        @apply(--layout-horizontal);
        @apply(--layout-center-justified);
      }

		</style>

		<!-- media queries -->
		<iron-media-query query="(max-width : 479px)"
		                  query-matches="{{ mobileSmall }}"></iron-media-query>
		<iron-media-query query="(min-width : 480px) and (max-width : 767px)"
		                  query-matches="{{ mobileMedium }}"></iron-media-query>

		<section class="section-hero-header"
		         mobile-small$="{{ mobileSmall }}"
		         mobile-medium$="{{ mobileMedium }}">
			<div class="container">
				<div class="image-wrapper skew">
          <iron-image class="image skew-reset"
            sizing="cover"
            fade="true"
            preload
            placeholder="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAARUlEQVQYVx3LsQ2AQAwEwXPP9EIt9EADBOcMkRG8Lfk+MnrCHWltO709BIbgKdh+Pc0oeE5wFOy43/5jYQjGqOYQmGsrfE+bLy6etpfQAAAAAElFTkSuQmCC"
            src$="[[ heroHeaderData.background_image ]]">
          </iron-image>
				</div>
        <div class="content-wrapper"
             mobile-small$="{{ mobileSmall }}"
		         mobile-medium$="{{ mobileMedium }}">
					<template is="dom-if" if="{{ hasValue(heroHeaderData.title) }}">
            <h1 class="title">
              <span class="title-line">[[ heroHeaderData.title ]]</span>
            </h1>
					</template>


          <template is="dom-if" if="{{ hasValue(heroHeaderData.sub_title) }}">
            <h2 class="title">
              <span class="title-line">[[ heroHeaderData.sub_title ]]</span>
            </h2>
          </template>

          <template
            is="dom-if"
            if="[[ heroHeaderData.cta_toggle ]]">
            <div class="">
            <dorel-cta
              type="primary"
              link="[[ heroHeaderData.cta_href ]]">
                [[ heroHeaderData.cta_text ]]
            </dorel-cta>
              </div>
          </template>
        </div>
		</section>
	</template>


	<script>
		Polymer({
			is: 'dorel-section-hero-header',

			properties: {

				/**
				 * @attribute
				 * @name heroHeaderData
				 * @description all data defined by ACF/Wordpress to build this component
				 */
				heroHeaderData: {
					type: Object,
					value: function () {
						return {};
					}
				}

			},

			/**
			 * @name hasBackgroundImage
			 * @description checks to see if a background image is set in Wordpress
			 *
			 * @returns Sting when no image is set it returns the placeholder string
			 */
			hasValue: function (val) {
				return (typeof val !== 'undefined' || val !== '');
			}
		});
	</script>
</dom-module>
