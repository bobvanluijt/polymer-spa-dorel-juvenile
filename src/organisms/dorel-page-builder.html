<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="organisms/dorel-layout-section.html">
<link rel="import" href="organisms/dorel-layout-section-column.html">

<dom-module id="dorel-page-builder">
  <template>

    <style is="custom-style">
      dorel-layout-section dorel-page-builder {
        width: 100%;
        display: flex;
      }

      dorel-hero {
        --dorel-hero-bg: {
          min-height: 540px; /* temporary */
          background-size: cover;
          background-position: 0 -230px;;
          background-repeat: no-repeat;
        };
      }
    </style>

    <!-- show when acf.page_builder has components -->
    <template 
      is="dom-if" 
      if="{{ builderData.length }}">
      <!-- iterate over page_builder components -->
      <template
        is="dom-repeat" 
        items="[[ builderData ]]" 
        as="component">


    


        <!-- dorel card -->
        <template 
          is="dom-if" 
          if="{{ _isPageComponent(component.acf_fc_layout, 'card') }}">

          <dorel-card card-data="[[ component ]]"></dorel-card>

        </template>
        <!--// dorel card -->





        <!-- dorel column-wrapper -->
        <template 
          is="dom-if" 
          if="{{ _isPageComponent(component.acf_fc_layout, 'column_wrapper') }}">

          <dorel-layout-section>
            <dorel-page-builder builder-data="[[ component.columns ]]"></dorel-page-builder>
          </dorel-layout-section>

        </template>
        <!--// dorel column-wrapper -->




        <!-- column_full -->
        <template 
          is="dom-if" 
          if="{{ _isPageComponent(component.acf_fc_layout, 'column_full') }}">

          <!-- column-half -->
          <dorel-layout-section-column column-align="[[ component.column_align ]]">
            <dorel-column-content>
              
              <dorel-page-builder builder-data="[[ component.column_flex_content ]]"></dorel-page-builder>

            </dorel-column-content>
          </dorel-layout-section-column>

        </template>
        <!--// column_full -->





        <!-- column_half -->
        <template 
          is="dom-if" 
          if="{{ _isPageComponent(component.acf_fc_layout, 'column_half') }}">
          
          <!-- column-half -->
          <dorel-layout-section-column column-align="[[ component.column_align ]]">
            <dorel-column-content>
              
              <dorel-page-builder builder-data="[[ component.column_flex_content ]]"></dorel-page-builder>

            </dorel-column-content>
          </dorel-layout-section-column>

        </template>
        <!--// column_half -->





        <!-- dorel content_wrapper -->
        <template 
          is="dom-if" 
          if="{{ _isPageComponent(component.acf_fc_layout, 'content_wrapper') }}">

          <dorel-content-wrapper
            content-title="[[ component.content_wrapper_title ]]"
            content-html="[[ component.content_wrapper_text ]]"></dorel-content-wrapper>

        </template>
        <!--// dorel content_wrapper -->





        <!-- dorel hero -->
        <template 
          is="dom-if" 
          if="{{ _isPageComponent(component.acf_fc_layout, 'hero') }}">

          <dorel-hero hero-data="[[ component ]]"></dorel-hero>

        </template>
        <!--// dorel hero -->





        <!-- dorel slider -->
        <template 
          is="dom-if" 
          if="{{ _isPageComponent(component.acf_fc_layout, 'slider') }}">

          <dorel-slider>
            <dorel-slider-slide
              slide-data="[[ component.slides ]]"
              slide-index="0">
            </dorel-slider-slide>

            <dorel-slider-slide
              slide-data="[[ component.slides ]]"
              slide-index="1">
            </dorel-slider-slide>
          </dorel-slider>

          
          <template
            is="dom-repeat" 
            items="[[ component.slides ]]">
            <dorel-slider-slide
              slide-data="[[ item ]]"
              slide-index="{{ index }}">
            </dorel-slider-slide>

          </template>
          

        </template>
        <!--// dorel slider -->




        <!-- standout sections -->
        <template 
          is="dom-if" 
          if="{{ _isPageComponent(component.acf_fc_layout, 'standout') }}">
            
          <dorel-section-standout
            standout-data="[[ component ]]"
            standout-index="[[ index ]]"></dorel-section-standout>

        </template>
        <!--// standout sections -->





      </template><!--// dom-repeat -->
    </template><!--// dom-if -->

  </template>
  
  <script>

    Polymer({
      is: 'dorel-page-builder',

      _isPageComponent: function(response, cname) {
        return response === cname;
      }
    });

  </script>

</dom-module>