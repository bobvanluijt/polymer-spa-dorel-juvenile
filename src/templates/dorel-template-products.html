<dom-module id="dorel-template-products">
  <template>
    
    <!-- define routing for products -->
    <app-route
        route="{{ route }}"
        pattern="/:productId"
        data="{{ routeData }}"
        tail="{{ subroute }}"></app-route>

    <iron-pages role="main"
      selected="{{ routeData.productId }}"
      attr-for-selected="name">

      <!-- for every page create a dorel-template -->
      <template
        is="dom-repeat"
        items="{{ templateData.products }}"
        as="page">

        <dorel-template-product-detail
          name="[[ page.slug ]]"
          template-data="{{ page }}"></dorel-template-product-detail>

      </template>

    </iron-pages>

    <!-- <dorel-page-builder
      builder-data="[[ templateData.acf.page_builder ]]"></dorel-page-builder> -->

  </template>

  <script>
    Polymer({
      is: 'dorel-template-products',

      properties: {

        /**
         * @attribute
         * @name templateData
         * @description the data coming from ACF/Wordpress which is delegated to the page builder
         */
        templateData: {
          type: String
        }
        
      },

      ready: function() {
        this.importHref(this.resolveUrl('dorel-template-product-detail.html'), null, null, true);
      }

    });
  </script>
</dom-module>
