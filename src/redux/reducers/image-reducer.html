<script>
  (function() {
    const initial = [];

    imageReducer = (state = initial, action) => {
      switch (action.type) {

        case 'REQUEST_IMAGE':
          const tempImage = { id: action.payload.id, isLoading: true, notAvailable: false }
          return [...state, tempImage]

        case 'ADD_IMAGE':
          return state.map((image) => {
            return image.id === action.payload.id ?
              Object.assign(image, {...action.payload.image, isLoading: false}) : image;
          });

        case 'IMAGE_NOT_AVAILABLE':
          return state.map((image) => {
            return image.id === action.payload.id ?
              Object.assign({}, {...image, isLoading: false, notAvailable: true }) : image;
          });

        default:
          return state;
      }
    };

}());
</script>
