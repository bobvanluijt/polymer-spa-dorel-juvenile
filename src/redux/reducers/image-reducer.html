<script>
  (function() {
    const initial = [];

    imageReducer = (state = initial, action) => {
      switch (action.type) {

        case 'REQUEST_IMAGE':
          return [...state, { id: action.payload.id, isLoading: true, notAvailable: false }]

        case 'ADD_IMAGE':
          return [
            ...state.filter((image) => image.id !== action.payload.image.id),
            {
              ...action.payload.image,
              isLoading: false
            }
          ];

        case 'IMAGE_NOT_AVAILABLE':
          return state.map((image) => {
            return image.id === action.payload.id ?
              Object.assign({}, {...image, isLoading: false, notAvailable: true }) : image;
          });

        default:
          return state;
      }
    };

}());
</script>
