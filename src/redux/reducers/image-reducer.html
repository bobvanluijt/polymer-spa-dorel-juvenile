<script>
  (function() {
    const initial = { images: [] };

    imageReducer = (state = initial, action) => {
      switch (action.type) {

        case 'REQUEST_IMAGE':
          state.push({ id: action.payload.id, isLoading: true, notAvailable: false });
          return state.map(image => image);

        case 'ADD_IMAGE':
          return state.map((image) => {
            return image.id === action.payload.id ?
              Object.assign({}, action.payload.image, { isLoading: false }) : image;
          });

        case 'IMAGE_NOT_AVAILABLE':
          return state.map((image) => {
            return image.id === action.payload.id ?
              Object.assign({}, image, { isLoading: false, notAvailable: true }) : image;
          });

        default:
          return state;
      }
    };

}());
</script>
