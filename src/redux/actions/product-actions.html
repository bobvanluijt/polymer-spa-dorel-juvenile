<script>
(function() {

function setProductCategory(categoryPage) {
  return (dispatch) => {
    if(!categoryPage || !categoryPage.acf || categoryPage.template !== 'product-listing') {
      return dispatch(addProductCategory(-1));
    } else {
      const categoryPicker = categoryPage.acf.magento_category_picker;
      const category = typeof categoryPicker === 'string' ? parseInt(categoryPicker) : categoryPicker;
      return dispatch(addProductCategory(category));
    }
  }
}

function addProductCategory(category) {
  return {
    type: 'ADD_PRODUCT_CATEGORY',
    payload: category
  }
}


productActions = {
  setProductCategory
}

}());
</script>
