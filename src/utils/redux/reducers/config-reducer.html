<script>
  (function() {

    const initial = {
      wpUrl: CONFIG.CMS_URL,
      dioApiUrl: CONFIG.DIO_API_URL,
      eComUrl: CONFIG.ECOM_URL,
      reviewsUrl: CONFIG.REVIEWS_URL,
      cookie: {
        toggle: false,
        cookies: []
      },
      grid: {
        horizontal: false,
        vertical: false
      }
    };

    configReducer = (state = initial, action) => {
      switch (action.type) {
        case 'ADD_OPTIONS_SUCCESS':
          action.payload.cookie.cookies = [];
          return Object.assign({}, state, action.payload);

        case 'ADD_OPTIONS_FAILED':
          return Object.assign({}, state);

        case 'SET_VERTICAL_GRID':
          return Object.assign({}, state, {
            grid: Object.assign({}, state.grid, {
              vertical: !state.grid.vertical
            })
          });

        case 'SET_HORIZONTAL_GRID':
          return Object.assign({}, state, {
            grid: Object.assign({}, state.grid, {
              horizontal: !state.grid.horizontal
            })
          });

        case 'SET_COOKIE':
          return Object.assign({}, state, {
            cookie: Object.assign({}, state.cookie, {
              cookies: !state.cookie.cookies.some(cookie_ => cookie_.key === action.payload.key) ?
                [...state.cookie.cookies, {
                  key: action.payload.key,
                  value: action.payload.value
                }] : state.cookie.cookies.map(cookie => {
                  if(cookie.key !== action.payload.key) {
                    return cookie;
                  }
                  return {
                    key: action.payload.key,
                    value: action.payload.value
                  }
                })
            })
          });

        case 'READ_COOKIE':
          const isSet = state.cookie.cookies.some(cookie => cookie.key === action.payload);

        default:
          return state;
      }
    };
}());
</script>
