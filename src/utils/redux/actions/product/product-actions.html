<link rel="import" href="./product-by-url-key-actions.html">
<link rel="import" href="./products-by-category-actions.html">
<link rel="import" href="./products-by-sku-actions.html">

<script>
(function() {

function setProductCategoryPage(categoryPage) {
  if(!categoryPage || !categoryPage.acf || categoryPage.template !== 'product-listing') {
    return { type: 'ADD_PRODUCT_CATEGORY_PAGE', payload: -1 }
  } else {
    const categoriesPicker = categoryPage.acf.magento_category_picker;
    const categories = typeof categoriesPicker === 'string' ? [parseInt(categoriesPicker)] : categoriesPicker;
    return { type: 'ADD_PRODUCT_CATEGORY_PAGE', payload: categories }
  }
}

function setCurrentProduct(currentProduct) {
  if(!currentProduct) {
    return { type: 'SET_CURRENT_PRODUCT', payload: 'none' }
  } else {
    return { type: 'SET_CURRENT_PRODUCT', payload: currentProduct }
  }
}

window.productActions = Object.assign({},
  productByUrlKeyActions,
  productByCategoryActions,
  productBySkuActions,
  {
    setProductCategoryPage,
    setCurrentProduct
  }
);

}());
</script>
